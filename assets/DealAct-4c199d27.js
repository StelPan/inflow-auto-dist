import{b as E,a as d,o as b,_ as w,m as c,x,p as m,f as C,c as n,h as s,B as D}from"./_plugin-vue_export-helper-4e0f1051.js";import{u as B}from"./vue-router-e112b3e0.js";import{s as I}from"./card.esm-90d7995a.js";import{F as V}from"./FormInput-548ea6e1.js";import{D as A,F as P}from"./DocInfo-40ccac8a.js";import{F as R}from"./FormCalendar-df7b8aea.js";import{a as S,F as T,v as y}from"./principalDeals-5bcfc342.js";import{u as N}from"./Api-3d31057e.js";import{T as U,W}from"./Wrap-54e7c8aa.js";import"./Cookies-c25692b0.js";import"./ripple.esm-2bb5fa45.js";import"./inputnumber.esm-b284c98e.js";import"./button.esm-48574c78.js";import"./FormItem-02d4fb9f.js";import"./dayjs.min-18f6db6c.js";import"./overlayeventbus.esm-47a43062.js";import"./portal.esm-58de97e7.js";import"./runtime-dom.esm-bundler-b3385430.js";import"./DateTime-6dd15e58.js";import"./index.es-55ebbfbf.js";import"./progressspinner.esm-2138ab26.js";import"./index-9063c430.js";import"./FormLayout-06a8a99e.js";const G={components:{DocInfo:A,Card:I,FileGroup:P,FormInput:V,TitleBox:U,FormCalendar:R,Wrap:W},setup(){var r;const i=B(),{principalState:o}=N(),u=i.params.dealID,e=E(()=>i.params.dealID==="create"),_=d([]),F=d([]),l=d({}),t=d({});e.value?_.value=[]:((r=o.deal)==null?void 0:r.data.id)!==Number(u)?b(()=>p()):(t.value.acceptance_number=o.deal.data.acceptance.acceptance_number,t.value.acceptance_date=o.deal.data.acceptance.acceptance_date,t.value.photos=o.deal.data.acceptance.acceptance_photos);const p=async()=>{const a=await S(u);a!=null&&a.car&&(t.value.acceptance_number=a.acceptance.acceptance_number,t.value.acceptance_date=a.acceptance.acceptance_date,t.value.photos=a.acceptance.acceptance_photos)};return{photos:_,postDealAct:T,handleError:async a=>{l.value=a},principalState:o,preloadFile:F,setPreloadFile:a=>{F.value=a},data:t,removeFile:a=>{y(u,{uuid:a}),p()},errors:l}}},M={class:"grid"},g={class:"col-4"},k=s("i",{class:"text-red-500"},"*",-1),j={class:"col-4"},q=s("i",{class:"text-red-500"},"*",-1);function z(i,o,u,e,_,F){const l=c("TitleBox"),t=c("FormInput"),p=c("FormCalendar"),f=c("Card"),h=c("FileGroup"),v=c("Wrap");return C(),x(v,{class:"p-4",data:{acceptance_number:e.data.acceptance_number,acceptance_date:e.data.acceptance_date,photo:e.preloadFile[0]},apiMethod:e.postDealAct,onUpdateError:e.handleError},{default:m(()=>[n(l,{nameSection:"Фото"}),n(f,{class:"mb-5 mt-5"},{content:m(()=>[s("div",M,[s("div",g,[n(t,{type:"text",name:"acceptance_number",modelValue:e.data.acceptance_number,"onUpdate:modelValue":o[0]||(o[0]=r=>e.data.acceptance_number=r),label:"Номер акта",showErrors:e.errors.isShow,errorResponse:e.errors.response},{default:m(()=>[D("Номер акта "),k]),_:1},8,["modelValue","showErrors","errorResponse"])]),s("div",j,[n(p,{type:"text",name:"acceptance_date",modelValue:e.data.acceptance_date,"onUpdate:modelValue":o[1]||(o[1]=r=>e.data.acceptance_date=r),label:"Дата подписания акта",showErrors:e.errors.isShow,errorResponse:e.errors.response},{default:m(()=>[D("Дата подписания акта "),q]),_:1},8,["modelValue","showErrors","errorResponse"])])])]),_:1}),n(h,{title:"Обязательные фото",photos:e.data.photos||[],class:"mb-4",setPreloadFile:e.setPreloadFile,returnIDForDeletion:e.removeFile,multiple:""},null,8,["photos","setPreloadFile","returnIDForDeletion"])]),_:1},8,["data","apiMethod","onUpdateError"])}const ie=w(G,[["render",z],["__file","/var/www/inflow-auto-front-main/src/views/deals/begin/DealAct.vue"]]);export{ie as default};
