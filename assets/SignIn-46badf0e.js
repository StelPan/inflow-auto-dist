import{s as g}from"./button.esm-48574c78.js";import{d as C,_ as k,m as e,x as n,p as t,f as u,c as i,B as r,g as v,q as m,h as F,j as S}from"./_plugin-vue_export-helper-4e0f1051.js";import{r as p}from"./index-5ce0c5bc.js";import{F as B,S as V,p as y,a as b}from"./SmsCode-97131fe7.js";import{F as P}from"./FormInput-98bf5b06.js";import{F as _}from"./FormLayout-e63b5088.js";import"./ripple.esm-2bb5fa45.js";import"./vue-router-e112b3e0.js";import"./Cookies-c25692b0.js";import"./Api-3d31057e.js";import"./index.es-55ebbfbf.js";import"./runtime-dom.esm-bundler-b3385430.js";import"./principalSetUser-1de61370.js";import"./inputnumber.esm-b284c98e.js";import"./FormItem-904d0fd7.js";const R=C({components:{Button:g,FormLayout:_,FormHeader:B,FormInput:P,SmsCode:V},data(){return{phone:"",code:"",isSaving:!1,isPhoneValid:!1,showErrors:!1,errorResponse:void 0}},methods:{async sndPhone(){if(!this.phone){this.showErrors=!0;return}this.isSaving=!0,this.errorResponse=void 0,this.showErrors=!1;const o=await y({phone:this.phone});this.isSaving=!1,o.success?this.isPhoneValid=!0:(this.isPhoneValid=!0,this.errorResponse=o,this.showErrors=!0)},async sndCode(){if(!this.code){this.showErrors=!0;return}this.isSaving=!0,this.errorResponse=void 0,this.showErrors=!1;const o=await b({phone:this.phone,code:this.code});this.isSaving=!1,o.success?p.push("/projects"):(p.push("/projects"),this.errorResponse=o,this.showErrors=!0)}},setup(){return{router:p}}}),I="SignIn_formButtons_1691548060482",$="SignIn_restorePassword_1691548060482",D={formButtons:I,restorePassword:$},L={key:0};function N(o,s,H,q,A,M){const h=e("FormHeader"),f=e("FormInput"),c=e("router-link"),E=e("SmsCode"),a=e("Button"),w=e("FormLayout");return u(),n(w,null,{default:t(()=>{var d;return[i(h,null,{default:t(()=>[r("Добро пожаловать")]),_:1}),i(f,{type:"tel",name:"phone",modelValue:o.phone,"onUpdate:modelValue":s[0]||(s[0]=l=>o.phone=l),label:"Телефон",showErrors:o.showErrors,errorResponse:o.errorResponse,disabled:o.isPhoneValid,isOffset:"",as:"mask",maskProps:{mask:"+7 (999) 999-99-99"}},{required:t(()=>[r("Введите Ваш номер телефона")]),_:1},8,["modelValue","showErrors","errorResponse","disabled","maskProps"]),o.showErrors&&((d=o.errorResponse.errorFields)!=null&&d.phone)?(u(),v("p",L,[r(" Возможно вы хотите "),i(c,{class:"p-link",to:`/register?phone=${o.phone}`},{default:t(()=>[r("зарегистрироваться")]),_:1},8,["to"]),r("? ")])):m("v-if",!0),o.isPhoneValid?(u(),n(E,{key:1,modelValue:o.code,"onUpdate:modelValue":s[1]||(s[1]=l=>o.code=l)},null,8,["modelValue"])):m("v-if",!0),F("div",{class:S(o.$style.formButtons)},[o.isPhoneValid?(u(),n(a,{key:1,type:"submit",label:o.isSaving?"Идет вход":"Отправить код",loading:o.isSaving,onClick:o.sndCode,class:"p-button-rounded"},null,8,["label","loading","onClick"])):(u(),n(a,{key:0,type:"submit",label:o.isSaving?"Идет вход":"Войти",loading:o.isSaving,onClick:o.sndPhone,class:"p-button-rounded"},null,8,["label","loading","onClick"])),i(a,{label:"Регистрация",class:"p-button-text p-button-rounded",onClick:s[2]||(s[2]=()=>o.router.push("/register"))})],2)]}),_:1})}const j={$style:D},eo=k(R,[["render",N],["__cssModules",j],["__file","/var/www/inflow-auto-front-main/src/views/auth/SignIn.vue"]]);export{eo as default};
