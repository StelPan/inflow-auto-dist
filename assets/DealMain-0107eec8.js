import{s as me}from"./badge.esm-cbb8631f.js";import{s as he}from"./progressspinner.esm-2138ab26.js";import{b as O,m as b,s as ne,f as D,x as Z,p as l,g as C,j as t,c as o,y as W,A as J,k as Q,t as n,q as j,h as e,B as v,a as y,r as T,_ as I,d as L,o as q,F as V,z as _e}from"./_plugin-vue_export-helper-4e0f1051.js";import{u as S}from"./vue-router-e112b3e0.js";import{c as U}from"./Numbers-ee6ad433.js";import{p as ge,a as K,b as de,c as re,d as we,e as be,g as $e,h as H,i as ye,j as De,k as Ce,l as Ee,m as Oe}from"./principalDeals-5bcfc342.js";import{u as X}from"./Api-3d31057e.js";import{s as M}from"./button.esm-48574c78.js";import{s as pe}from"./inputswitch.esm-79249e3b.js";import{s as x}from"./card.esm-90d7995a.js";import{F as je}from"./focustrap.esm-4326017e.js";import{s as ke}from"./portal.esm-58de97e7.js";import{Z as ee,D as B,U as ie,R as Be}from"./ripple.esm-2bb5fa45.js";import{T as Fe}from"./runtime-dom.esm-bundler-b3385430.js";import{F as G}from"./FormInput-548ea6e1.js";import{A as ae}from"./index.es-55ebbfbf.js";import{F as fe}from"./FormLayout-06a8a99e.js";import{F as ve}from"./FormCheckbox-bef17ff5.js";import"./dayjs.min-18f6db6c.js";import"./Cookies-c25692b0.js";import"./DateTime-6dd15e58.js";import"./inputnumber.esm-b284c98e.js";import"./FormItem-02d4fb9f.js";import"./checkbox.esm-31a5a5c8.js";var te={name:"Dialog",inheritAttrs:!1,emits:["update:visible","show","hide","after-hide","maximize","unmaximize","dragend"],props:{header:{type:null,default:null},footer:{type:null,default:null},visible:{type:Boolean,default:!1},modal:{type:Boolean,default:null},contentStyle:{type:null,default:null},contentClass:{type:String,default:null},contentProps:{type:null,default:null},rtl:{type:Boolean,default:null},maximizable:{type:Boolean,default:!1},dismissableMask:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},position:{type:String,default:"center"},breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0},keepInViewport:{type:Boolean,default:!0},minX:{type:Number,default:0},minY:{type:Number,default:0},appendTo:{type:String,default:"body"},closeIcon:{type:String,default:"pi pi-times"},maximizeIcon:{type:String,default:"pi pi-window-maximize"},minimizeIcon:{type:String,default:"pi pi-window-minimize"},closeButtonProps:{type:null,default:null},_instance:null},provide(){return{dialogRef:O(()=>this._instance)}},data(){return{containerVisible:this.visible,maximized:!1,focusableMax:null,focusableClose:null}},documentKeydownListener:null,container:null,mask:null,content:null,headerContainer:null,footerContainer:null,maximizableButton:null,closeButton:null,styleElement:null,dragging:null,documentDragListener:null,documentDragEndListener:null,lastPageX:null,lastPageY:null,updated(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount(){this.unbindDocumentState(),this.unbindGlobalListeners(),this.destroyStyle(),this.mask&&this.autoZIndex&&ee.clear(this.mask),this.container=null,this.mask=null},mounted(){this.breakpoints&&this.createStyle()},methods:{close(){this.$emit("update:visible",!1)},onBeforeEnter(s){s.setAttribute(this.attributeSelector,"")},onEnter(){this.$emit("show"),this.focus(),this.enableDocumentSettings(),this.bindGlobalListeners(),this.autoZIndex&&ee.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal)},onBeforeLeave(){this.modal&&B.addClass(this.mask,"p-component-overlay-leave")},onLeave(){this.$emit("hide"),this.focusableClose=null,this.focusableMax=null},onAfterLeave(){this.autoZIndex&&ee.clear(this.mask),this.containerVisible=!1,this.unbindDocumentState(),this.unbindGlobalListeners(),this.$emit("after-hide")},onMaskClick(s){this.dismissableMask&&this.modal&&this.mask===s.target&&this.close()},focus(){const s=d=>d.querySelector("[autofocus]");let u=this.$slots.footer&&s(this.footerContainer);u||(u=this.$slots.header&&s(this.headerContainer),u||(u=this.$slots.default&&s(this.content),u||(this.maximizable?(this.focusableMax=!0,u=this.maximizableButton):(this.focusableClose=!0,u=this.closeButton)))),u&&B.focus(u)},maximize(s){this.maximized?(this.maximized=!1,this.$emit("unmaximize",s)):(this.maximized=!0,this.$emit("maximize",s)),this.modal||(this.maximized?B.addClass(document.body,"p-overflow-hidden"):B.removeClass(document.body,"p-overflow-hidden"))},enableDocumentSettings(){(this.modal||this.maximizable&&this.maximized)&&B.addClass(document.body,"p-overflow-hidden")},unbindDocumentState(){(this.modal||this.maximizable&&this.maximized)&&B.removeClass(document.body,"p-overflow-hidden")},onKeyDown(s){s.code==="Escape"&&this.closeOnEscape&&this.close()},bindDocumentKeyDownListener(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},getPositionClass(){const u=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(d=>d===this.position);return u?`p-dialog-${u}`:""},containerRef(s){this.container=s},maskRef(s){this.mask=s},contentRef(s){this.content=s},headerContainerRef(s){this.headerContainer=s},footerContainerRef(s){this.footerContainer=s},maximizableRef(s){this.maximizableButton=s},closeButtonRef(s){this.closeButton=s},createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let s="";for(let u in this.breakpoints)s+=`
                        @media screen and (max-width: ${u}) {
                            .p-dialog[${this.attributeSelector}] {
                                width: ${this.breakpoints[u]} !important;
                            }
                        }
                    `;this.styleElement.innerHTML=s}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},initDrag(s){B.hasClass(s.target,"p-dialog-header-icon")||B.hasClass(s.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=s.pageX,this.lastPageY=s.pageY,this.container.style.margin="0",B.addClass(document.body,"p-unselectable-text"))},bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.closeOnEscape&&this.closable&&this.bindDocumentKeyDownListener()},unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentKeyDownListener()},bindDocumentDragListener(){this.documentDragListener=s=>{if(this.dragging){let u=B.getOuterWidth(this.container),d=B.getOuterHeight(this.container),r=s.pageX-this.lastPageX,p=s.pageY-this.lastPageY,c=this.container.getBoundingClientRect(),i=c.left+r,h=c.top+p,m=B.getViewport();this.container.style.position="fixed",this.keepInViewport?(i>=this.minX&&i+u<m.width&&(this.lastPageX=s.pageX,this.container.style.left=i+"px"),h>=this.minY&&h+d<m.height&&(this.lastPageY=s.pageY,this.container.style.top=h+"px")):(this.lastPageX=s.pageX,this.container.style.left=i+"px",this.lastPageY=s.pageY,this.container.style.top=h+"px")}},window.document.addEventListener("mousemove",this.documentDragListener)},unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)},bindDocumentDragEndListener(){this.documentDragEndListener=s=>{this.dragging&&(this.dragging=!1,B.removeClass(document.body,"p-unselectable-text"),this.$emit("dragend",s))},window.document.addEventListener("mouseup",this.documentDragEndListener)},unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}},computed:{maskClass(){return["p-dialog-mask",{"p-component-overlay p-component-overlay-enter":this.modal},this.getPositionClass()]},dialogClass(){return["p-dialog p-component",{"p-dialog-rtl":this.rtl,"p-dialog-maximized":this.maximizable&&this.maximized,"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},maximizeIconClass(){return["p-dialog-header-maximize-icon",{[this.maximizeIcon]:!this.maximized,[this.minimizeIcon]:this.maximized}]},ariaId(){return ie()},ariaLabelledById(){return this.header!=null||this.$attrs["aria-labelledby"]!==null?this.ariaId+"_header":null},closeAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0},attributeSelector(){return ie()},contentStyleClass(){return["p-dialog-content",this.contentClass]}},directives:{ripple:Be,focustrap:je},components:{Portal:ke}};const Ie=["aria-labelledby","aria-modal"],Se=["id"],Ae={class:"p-dialog-header-icons"},Me=["autofocus","tabindex"],Le=["autofocus","aria-label"];function Ue(s,u,d,r,p,c){const i=b("Portal"),h=ne("ripple"),m=ne("focustrap");return D(),Z(i,{appendTo:d.appendTo},{default:l(()=>[p.containerVisible?(D(),C("div",{key:0,ref:c.maskRef,class:t(c.maskClass),onClick:u[3]||(u[3]=(...a)=>c.onMaskClick&&c.onMaskClick(...a))},[o(Fe,{name:"p-dialog",onBeforeEnter:c.onBeforeEnter,onEnter:c.onEnter,onBeforeLeave:c.onBeforeLeave,onLeave:c.onLeave,onAfterLeave:c.onAfterLeave,appear:""},{default:l(()=>[d.visible?W((D(),C("div",J({key:0,ref:c.containerRef,class:c.dialogClass,role:"dialog","aria-labelledby":c.ariaLabelledById,"aria-modal":d.modal},s.$attrs),[d.showHeader?(D(),C("div",{key:0,ref:c.headerContainerRef,class:"p-dialog-header",onMousedown:u[2]||(u[2]=(...a)=>c.initDrag&&c.initDrag(...a))},[Q(s.$slots,"header",{},()=>[d.header?(D(),C("span",{key:0,id:c.ariaLabelledById,class:"p-dialog-title"},n(d.header),9,Se)):j("",!0)]),e("div",Ae,[d.maximizable?W((D(),C("button",{key:0,ref:c.maximizableRef,autofocus:p.focusableMax,class:"p-dialog-header-icon p-dialog-header-maximize p-link",onClick:u[0]||(u[0]=(...a)=>c.maximize&&c.maximize(...a)),type:"button",tabindex:d.maximizable?"0":"-1"},[e("span",{class:t(c.maximizeIconClass)},null,2)],8,Me)),[[h]]):j("",!0),d.closable?W((D(),C("button",J({key:1,ref:c.closeButtonRef,autofocus:p.focusableClose,class:"p-dialog-header-icon p-dialog-header-close p-link",onClick:u[1]||(u[1]=(...a)=>c.close&&c.close(...a)),"aria-label":c.closeAriaLabel,type:"button"},d.closeButtonProps),[e("span",{class:t(["p-dialog-header-close-icon",d.closeIcon])},null,2)],16,Le)),[[h]]):j("",!0)])],544)):j("",!0),e("div",J({ref:c.contentRef,class:c.contentStyleClass,style:d.contentStyle},d.contentProps),[Q(s.$slots,"default")],16),d.footer||s.$slots.footer?(D(),C("div",{key:1,ref:c.footerContainerRef,class:"p-dialog-footer"},[Q(s.$slots,"footer",{},()=>[v(n(d.footer),1)])],512)):j("",!0)],16,Ie)),[[m,{disabled:!d.modal}]]):j("",!0)]),_:3},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave","onAfterLeave"])],2)):j("",!0)]),_:3},8,["appendTo"])}function xe(s,u){u===void 0&&(u={});var d=u.insertAt;if(!(!s||typeof document=="undefined")){var r=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.type="text/css",d==="top"&&r.firstChild?r.insertBefore(p,r.firstChild):r.appendChild(p),p.styleSheet?p.styleSheet.cssText=s:p.appendChild(document.createTextNode(s))}}var ze=`
.p-dialog-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
}
.p-dialog-mask.p-component-overlay {
    pointer-events: auto;
}
.p-dialog {
    display: flex;
    flex-direction: column;
    pointer-events: auto;
    max-height: 90%;
    transform: scale(1);
}
.p-dialog-content {
    overflow-y: auto;
}
.p-dialog-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
}
.p-dialog-footer {
    flex-shrink: 0;
}
.p-dialog .p-dialog-header-icons {
    display: flex;
    align-items: center;
}
.p-dialog .p-dialog-header-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
}

/* Fluid */
.p-fluid .p-dialog-footer .p-button {
    width: auto;
}

/* Animation */
/* Center */
.p-dialog-enter-active {
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}
.p-dialog-leave-active {
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}
.p-dialog-enter-from,
.p-dialog-leave-to {
    opacity: 0;
    transform: scale(0.7);
}

/* Top, Bottom, Left, Right, Top* and Bottom* */
.p-dialog-top .p-dialog,
.p-dialog-bottom .p-dialog,
.p-dialog-left .p-dialog,
.p-dialog-right .p-dialog,
.p-dialog-topleft .p-dialog,
.p-dialog-topright .p-dialog,
.p-dialog-bottomleft .p-dialog,
.p-dialog-bottomright .p-dialog {
    margin: 0.75rem;
    transform: translate3d(0px, 0px, 0px);
}
.p-dialog-top .p-dialog-enter-active,
.p-dialog-top .p-dialog-leave-active,
.p-dialog-bottom .p-dialog-enter-active,
.p-dialog-bottom .p-dialog-leave-active,
.p-dialog-left .p-dialog-enter-active,
.p-dialog-left .p-dialog-leave-active,
.p-dialog-right .p-dialog-enter-active,
.p-dialog-right .p-dialog-leave-active,
.p-dialog-topleft .p-dialog-enter-active,
.p-dialog-topleft .p-dialog-leave-active,
.p-dialog-topright .p-dialog-enter-active,
.p-dialog-topright .p-dialog-leave-active,
.p-dialog-bottomleft .p-dialog-enter-active,
.p-dialog-bottomleft .p-dialog-leave-active,
.p-dialog-bottomright .p-dialog-enter-active,
.p-dialog-bottomright .p-dialog-leave-active {
    transition: all 0.3s ease-out;
}
.p-dialog-top .p-dialog-enter-from,
.p-dialog-top .p-dialog-leave-to {
    transform: translate3d(0px, -100%, 0px);
}
.p-dialog-bottom .p-dialog-enter-from,
.p-dialog-bottom .p-dialog-leave-to {
    transform: translate3d(0px, 100%, 0px);
}
.p-dialog-left .p-dialog-enter-from,
.p-dialog-left .p-dialog-leave-to,
.p-dialog-topleft .p-dialog-enter-from,
.p-dialog-topleft .p-dialog-leave-to,
.p-dialog-bottomleft .p-dialog-enter-from,
.p-dialog-bottomleft .p-dialog-leave-to {
    transform: translate3d(-100%, 0px, 0px);
}
.p-dialog-right .p-dialog-enter-from,
.p-dialog-right .p-dialog-leave-to,
.p-dialog-topright .p-dialog-enter-from,
.p-dialog-topright .p-dialog-leave-to,
.p-dialog-bottomright .p-dialog-enter-from,
.p-dialog-bottomright .p-dialog-leave-to {
    transform: translate3d(100%, 0px, 0px);
}

/* Maximize */
.p-dialog-maximized {
    -webkit-transition: none;
    transition: none;
    transform: none;
    width: 100vw !important;
    height: 100vh !important;
    top: 0px !important;
    left: 0px !important;
    max-height: 100%;
    height: 100%;
}
.p-dialog-maximized .p-dialog-content {
    flex-grow: 1;
}

/* Position */
.p-dialog-left {
    justify-content: flex-start;
}
.p-dialog-right {
    justify-content: flex-end;
}
.p-dialog-top {
    align-items: flex-start;
}
.p-dialog-topleft {
    justify-content: flex-start;
    align-items: flex-start;
}
.p-dialog-topright {
    justify-content: flex-end;
    align-items: flex-start;
}
.p-dialog-bottom {
    align-items: flex-end;
}
.p-dialog-bottomleft {
    justify-content: flex-start;
    align-items: flex-end;
}
.p-dialog-bottomright {
    justify-content: flex-end;
    align-items: flex-end;
}
.p-confirm-dialog .p-dialog-content {
    display: flex;
    align-items: center;
}
`;xe(ze);te.render=Ue;const Ve={components:{FormInput:G,Dialog:te,Button:M},props:{isShowConfirm:Boolean,callback:Function},setup(s,u){const d=y(),r=y(),p=T({}),i=S().params.dealID;return{cancellation_reason:r,errors:p,isSaving:d,handleCanceled:async()=>{d.value=!0,(await ge(i,r.value)).success,d.value=!1}}}},Ne=e("i",{class:"text-red-500"},"*",-1);function Re(s,u,d,r,p,c){const i=b("FormInput"),h=b("Button"),m=b("Dialog");return D(),Z(m,{visible:s.$props.isShowConfirm,"onUpdate:visible":u[1]||(u[1]=a=>s.$props.isShowConfirm=a),modal:"",header:"Отмена сделки",style:{width:"30vw"}},{footer:l(()=>[o(h,{label:"Нет",icon:"pi pi-times",onClick:s.$props.callback,text:""},null,8,["onClick"]),o(h,{label:"Да",icon:"pi pi-check",onClick:r.handleCanceled,autofocus:"",loading:r.isSaving,disabled:!r.cancellation_reason},null,8,["onClick","loading","disabled"])]),default:l(()=>[o(i,{type:"text",name:"cancellation_reason",modelValue:r.cancellation_reason,"onUpdate:modelValue":u[0]||(u[0]=a=>r.cancellation_reason=a),label:"Укажите причину отмены",showErrors:r.errors.isShow,errorResponse:r.errors.response},{default:l(()=>[v("Укажите причину отмены "),Ne]),_:1},8,["modelValue","showErrors","errorResponse"])]),_:1},8,["visible"])}const oe=I(Ve,[["render",Re],["__file","/var/www/inflow-auto-front-main/src/views/deals/components/CancelDeal.vue"]]),Pe={components:{FormInput:G,Dialog:te,Button:M},props:{isShowConfirm:Boolean,close:Function,phone:String,title:String,confirm:Function,callback:Function},setup(s,u){const d=y(),r=y(),p=T({}),i=S().params.dealID;return{code:r,errors:p,isSaving:d,handleConfirm:async m=>{d.value=!0;const a=await s.confirm(i,r.value);a.success?(ae({title:"Внимание!",text:a.data.message,type:"success"}),r.value="",s.close(),s.callback&&s.callback()):ae({title:"Внимание!",text:a.error||a.message,type:"error"}),d.value=!1}}}},Te={class:"mb-1"},qe={class:"mb-2"};function Ke(s,u,d,r,p,c){const i=b("FormInput"),h=b("Button"),m=b("Dialog");return D(),Z(m,{visible:s.$props.isShowConfirm,"onUpdate:visible":u[1]||(u[1]=a=>s.$props.isShowConfirm=a),modal:"",header:"Подтверждение сделки",style:{width:"30vw"}},{footer:l(()=>[o(h,{label:"Нет",icon:"pi pi-times",onClick:d.close,text:""},null,8,["onClick"]),o(h,{label:"Да",icon:"pi pi-check",onClick:r.handleConfirm,autofocus:"",loading:r.isSaving},null,8,["onClick","loading"])]),default:l(()=>[e("h4",Te,n(s.$props.title),1),e("p",qe,"Код отправили на "+n(s.$props.phone),1),o(i,{type:"text",name:"code",modelValue:r.code,"onUpdate:modelValue":u[0]||(u[0]=a=>r.code=a),label:"Введите код",showErrors:r.errors.isShow,errorResponse:r.errors.response,as:"mask",maskProps:{mask:"9999"}},null,8,["modelValue","showErrors","errorResponse"])]),_:1},8,["visible"])}const le=I(Pe,[["render",Ke],["__file","/var/www/inflow-auto-front-main/src/views/deals/components/EnterCodeDeal.vue"]]),Xe="Данные отсутствуют",Ye=new Map([["bank","Банк"]]),Ze=L({components:{Card:x,Button:M,InputSwitch:pe,FormCheckbox:ve,FormInput:G,FormLayout:fe,CancelDeal:oe,EnterCodeDeal:le},props:{dealOverview:Object},setup(s){const u=S(),{principalState:d}=X(),r=u.params.projectID,p=u.params.dealID,c=O(()=>p==="create"),i=y(!1),h=y(!1),m=y(!1),a=y(!1),f=T({}),g=y(null);q(async()=>{const $=await K(p);g.value=$.owner.phone});const w=O(()=>!(s.dealOverview.recommended_cost.complete&&s.dealOverview.recommended_cost.complete&&s.dealOverview.dkp.complete&&s.dealOverview.seller_account.complete&&s.dealOverview.acceptance.complete&&s.dealOverview.docs_passed.complete&&s.dealOverview.keys_passed.complete));return{isCreating:c,projectID:r,dealID:p,dataEmpty:Xe,getFileName:$=>{if($)return $.split("/").reverse()[0]},disabledStartDeal:w,currencyFormat:U,handleTransit:async()=>{i.value=!0,(await $e(p)).success&&(m.value=!0),i.value=!1},isSaving:i,paymentMethod:Ye,errors:f,isShowConfirmManager:m,isShowConfirmCustomer:a,isShowCancel:h,principalState:d,postKeysPassed:de,postDocsPassed:re,phoneOwner:g,postManagerConfirmationConfirm:we,postCustomerConfirmationConfirm:be}}}),He="DealMainBegin_formCard_1691548270345",Ge="DealMainBegin_label_1691548270345",We="DealMainBegin_required_1691548270345",Je="DealMainBegin_doc_1691548270345",Qe="DealMainBegin_docUploaded_1691548270346",es={formCard:He,label:Ge,required:We,doc:Je,docUploaded:Qe},ss={class:"grid mb-4"},ts={class:"col-4"},os={class:"flex justify-content-between"},ls={class:"info flex flex-column gap-2"},us={class:""},ns={class:""},is={class:"col-4"},as={class:"flex justify-content-between"},cs={class:"info flex flex-column gap-2"},ds={class:""},rs=e("i",{class:"text-red-500"},"*",-1),ps=e("p",{class:""}," Средства на счете успешно зарезервированы ",-1),fs={class:"col-4"},vs={class:"flex justify-content-between"},ms={class:"info flex flex-column gap-2"},hs={class:""},_s=e("i",{class:"text-red-500"},"*",-1),gs={class:"flex justify-content-between align-items-center"},ws=e("i",{class:"pi pi-file"},null,-1),bs={class:"text-overflow-ellipsis"},$s={class:"text-xs"},ys={class:"col-4"},Ds={class:"flex justify-content-between"},Cs={class:"info flex flex-column gap-2"},Es={class:""},Os=e("i",{class:"text-red-500"},"*",-1),js={class:""},ks={class:"col-4"},Bs={class:"flex justify-content-between"},Fs={class:"info flex flex-column gap-2"},Is={class:""},Ss=e("i",{class:"text-red-500"},"*",-1),As={class:"flex justify-content-between align-items-center"},Ms=e("i",{class:"pi pi-file"},null,-1),Ls={class:"text-overflow-ellipsis"},Us={class:"text-xs"},xs={class:"col-4"},zs={class:"flex justify-content-between"},Vs={class:"info flex flex-column gap-2"},Ns={class:""},Rs=e("i",{class:"text-red-500"},"*",-1),Ps={class:"flex mt-2"},Ts={class:"ml-3"},qs={class:"col-4"},Ks={class:"flex justify-content-between"},Xs={class:"info flex flex-column gap-2"},Ys={class:""},Zs=e("i",{class:"text-red-500"},"*",-1),Hs={class:"flex mt-2"},Gs={class:"ml-3"},Ws={class:"flex gap-2 justify-content-between"};function Js(s,u,d,r,p,c){var w;const i=b("CancelDeal"),h=b("EnterCodeDeal"),m=b("Card"),a=b("router-link"),f=b("InputSwitch"),g=b("Button");return D(),C(V,null,[o(i,{isShowConfirm:s.isShowCancel,callback:()=>s.isShowCancel=!1},null,8,["isShowConfirm","callback"]),o(h,{isShowConfirm:s.isShowConfirmManager,close:()=>s.isShowConfirmManager=!1,phone:(w=s.principalState.user)==null?void 0:w.phone,confirm:s.postManagerConfirmationConfirm,callback:()=>s.isShowConfirmCustomer=!0,title:"Подтвердите начало сделки кодом из СМС"},null,8,["isShowConfirm","close","phone","confirm","callback"]),o(h,{isShowConfirm:s.isShowConfirmCustomer,close:()=>s.isShowConfirmCustomer=!1,phone:s.phoneOwner,confirm:s.postCustomerConfirmationConfirm,title:"Подтвердите начало сделки кодом из СМС отправленного продавцу"},null,8,["isShowConfirm","close","phone","confirm"]),e("div",ss,[e("div",ts,[o(m,{class:t(["h-full card-footer-bottom",s.dealOverview.recommended_cost.complete?"bg-green-50":"bg-orange-50"])},{content:l(()=>[e("div",os,[e("div",ls,[e("div",us,[e("p",{class:t(s.$style.label)},"Согласованная стоимость",2),e("p",ns,n(s.currencyFormat(s.dealOverview.recommended_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.recommended_cost.complete&&"text-green-500"])},null,2)])]),_:1},8,["class"])]),e("div",is,[o(m,{class:t(["h-full card-footer-bottom","bg-green-50"])},{content:l(()=>[e("div",as,[e("div",cs,[e("div",ds,[e("p",{class:t(s.$style.label)},[v(" Баланс резервного счета "),rs],2),v(" "+n(s.dealOverview.balance.required)+" ",1),ps])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),_:1})]),e("div",fs,[o(m,null,{content:l(()=>[e("div",vs,[e("div",ms,[e("div",hs,[e("p",{class:t(s.$style.label)},[v(" Договор купли-продажи ТС "),_s],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.dkp.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",gs,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[ws,e("div",null,[e("p",bs,n(s.dealOverview.dkp.value?`Договор №: ${s.dealOverview.dkp.value}`:"Договор не сформирован"),1),e("p",$s," Дата подписания: "+n(s.dealOverview.dkp.date?s.dealOverview.dkp.date:"не подписан"),1)])],2)])]),_:1})]),e("div",ys,[o(m,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Ds,[e("div",Cs,[e("div",Es,[e("p",{class:t(s.$style.label)},[v(" Реквизиты получателя "),Os],2),e("p",js," р.с. "+n(s.dealOverview.seller_account.account),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.seller_account.complete&&"text-green-500"])},null,2)])]),_:1})]),e("div",ks,[o(a,{to:`/projects/${s.projectID}/deals/${s.dealID}/act`},{default:l(()=>[o(m,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Bs,[e("div",Fs,[e("div",Is,[e("p",{class:t(s.$style.label)},[v(" Акт приема передачи "),Ss],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.acceptance.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",As,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[Ms,e("div",null,[e("p",Ls,n(s.dealOverview.acceptance.value?`Акт №: ${s.dealOverview.acceptance.value}`:"Акт не сформирован"),1),e("p",Us," Дата подписания: "+n(s.dealOverview.acceptance.date?s.dealOverview.acceptance.date:"не подписан"),1)])],2)])]),_:1})]),_:1},8,["to"])]),e("div",xs,[o(m,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",zs,[e("div",Vs,[e("div",Ns,[e("p",{class:t(s.$style.label)},[v("Передача оригиналов ПТС и СТС "),Rs],2),e("div",Ps,[o(f,{modelValue:s.dealOverview.docs_passed.value,"onUpdate:modelValue":u[0]||(u[0]=_=>s.dealOverview.docs_passed.value=_),onInput:u[1]||(u[1]=_=>s.postDocsPassed(s.dealID,_))},null,8,["modelValue"]),e("p",Ts,n(s.dealOverview.docs_passed.value?"Документы переданы":""),1)])])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.docs_passed.complete&&"text-green-500"])},null,2)])]),_:1})]),e("div",qs,[o(m,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Ks,[e("div",Xs,[e("div",Ys,[e("p",{class:t(s.$style.label)},[v("Передача 2-х комплектов ключей "),Zs],2),e("div",Hs,[o(f,{modelValue:s.dealOverview.keys_passed.value,"onUpdate:modelValue":u[2]||(u[2]=_=>s.dealOverview.keys_passed.value=_),onInput:u[3]||(u[3]=_=>s.postKeysPassed(s.dealID,_))},null,8,["modelValue"]),e("p",Gs,n(s.dealOverview.keys_passed.value?"Ключи переданы":""),1)])])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.keys_passed.complete&&"text-green-500"])},null,2)])]),_:1})])]),e("div",Ws,[o(g,{type:"submit",label:"Подтвердить сделку в банке",disabled:s.disabledStartDeal,onClick:s.handleTransit,loading:s.isSaving},null,8,["disabled","onClick","loading"]),o(g,{type:"submit",class:"ml-auto",label:"Отменить сделку",loading:s.isSaving,severity:"danger",onClick:u[4]||(u[4]=_=>s.isShowCancel=!0)},null,8,["loading"])])],64)}const Qs={$style:es},et=I(Ze,[["render",Js],["__cssModules",Qs],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainBegin.vue"]]),st=L({components:{Card:x,Button:M},props:{dealOverview:Object},setup(){const u=S().params.dealID,{principalState:d}=X();return q(async()=>{await K(u)}),{dealID:u,principalState:d}}}),tt="DealMainCanceled_formCard_1691548270348",ot="DealMainCanceled_label_1691548270348",lt="DealMainCanceled_required_1691548270348",ut="DealMainCanceled_doc_1691548270348",nt="DealMainCanceled_docUploaded_1691548270348",it={formCard:tt,label:ot,required:lt,doc:ut,docUploaded:nt},at={class:"mb-4"},ct=e("h1",null,"В выходе на сделку отказано",-1);function dt(s,u,d,r,p,c){var i;return D(),C("div",at,[ct,v(" Решение руководства: "+n((i=s.principalState.deal)==null?void 0:i.data.cancellation_reason),1)])}const rt={$style:it},pt=I(st,[["render",dt],["__cssModules",rt],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainCanceled.vue"]]),ft="Данные отсутствуют",vt=new Map([["bank","Банк"]]),mt=L({components:{Card:x,Button:M},props:{dealOverview:Object},setup(s){const u=S(),d=u.params.projectID,r=u.params.dealID,p=O(()=>r==="create"),c=y(!1),i=O(()=>!!Object.values(s.dealOverview).filter(a=>a&&typeof a.complete=="boolean").find(({complete:a})=>!a));return{isCreating:p,projectID:d,dealID:r,dataEmpty:ft,getFileName:a=>{if(a)return a.split("/").reverse()[0]},disabledStartDeal:i,currencyFormat:U,toNegotiation:async()=>{c.value=!0,await H(r,"negotiation"),c.value=!1},isSaving:c,paymentMethod:vt}}}),ht="DealMainComplete_formCard_1691548270353",_t="DealMainComplete_label_1691548270353",gt="DealMainComplete_required_1691548270353",wt="DealMainComplete_doc_1691548270354",bt="DealMainComplete_docUploaded_1691548270354",$t={formCard:ht,label:_t,required:gt,doc:wt,docUploaded:bt},yt={class:"grid mb-4"},Dt={class:"col-4"},Ct={class:"flex justify-content-between"},Et={class:"info flex flex-column gap-2"},Ot={class:""},jt={class:""},kt={class:"col-4"},Bt={class:"flex justify-content-between"},Ft={class:"info flex flex-column gap-2"},It={class:""},St=e("i",{class:"text-red-500"},"*",-1),At={class:"flex justify-content-between align-items-center"},Mt=e("i",{class:"pi pi-file"},null,-1),Lt={class:"text-overflow-ellipsis"},Ut={class:"text-xs"},xt={class:"col-4"},zt={class:"flex justify-content-between"},Vt={class:"info flex flex-column gap-2"},Nt={class:""},Rt=e("i",{class:"text-red-500"},"*",-1),Pt={class:"flex justify-content-between align-items-center"},Tt=e("i",{class:"pi pi-file"},null,-1),qt={class:"text-overflow-ellipsis"},Kt={class:"text-xs"},Xt={class:"col-4"},Yt={class:"flex justify-content-between"},Zt={class:"info flex flex-column gap-2"},Ht={class:""},Gt=e("i",{class:"text-red-500"},"*",-1),Wt={class:""},Jt=e("div",{class:"flex justify-content-end align-items-center"},null,-1),Qt={class:"col-4"},eo={class:"flex justify-content-between"},so={class:"info flex flex-column gap-2"},to={class:""},oo=e("i",{class:"text-red-500"},"*",-1),lo={class:""},uo=e("div",{class:"flex justify-content-end align-items-center"},[j(` <Button
                icon="pi pi-arrow-right"
                class="p-button-sm p-button-outlined"
              /> `)],-1),no={class:"col-4"},io={class:"flex justify-content-between"},ao={class:"info flex flex-column gap-2"},co={class:""},ro=e("i",{class:"text-red-500"},"*",-1),po={class:""},fo=e("div",{class:"flex justify-content-end align-items-center"},null,-1),vo=e("div",{class:"bg-green-100 border-1 border-round-md border-solid border-green-500 text-xl text-center py-5"},"Сделка успешно завершена",-1);function mo(s,u,d,r,p,c){const i=b("Card");return D(),C(V,null,[e("div",yt,[e("div",Dt,[o(i,{class:t(["h-full card-footer-bottom",s.dealOverview.recommended_cost.complete?"bg-green-50":"bg-orange-50"])},{content:l(()=>[e("div",Ct,[e("div",Et,[e("div",Ot,[e("p",{class:t(s.$style.label)},"Рекомендуемая стоимость",2),e("p",jt,n(s.currencyFormat(s.dealOverview.recommended_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.recommended_cost.complete&&"text-green-500"])},null,2)])]),_:1},8,["class"])]),e("div",kt,[o(i,null,{content:l(()=>[e("div",Bt,[e("div",Ft,[e("div",It,[e("p",{class:t(s.$style.label)},[v(" Договор купли-продажи ТС "),St],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.dkp.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",At,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[Mt,e("div",null,[e("p",Lt,n(s.dealOverview.dkp.value||"Договор не сформирован"),1),e("p",Ut," Дата подписания: "+n(s.dealOverview.dkp.date?s.dealOverview.dkp.date:"не подписан"),1)])],2)])]),_:1})]),e("div",xt,[o(i,null,{content:l(()=>[e("div",zt,[e("div",Vt,[e("div",Nt,[e("p",{class:t(s.$style.label)},[v(" Соглашение ТС "),Rt],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.acceptance.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Pt,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[Tt,e("div",null,[e("p",qt,n(s.dealOverview.acceptance.value||"Договор не сформирован"),1),e("p",Kt," Дата подписания: "+n(s.dealOverview.acceptance.date?s.dealOverview.acceptance.date:"не подписан"),1)])],2)])]),_:1})]),e("div",Xt,[o(i,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Yt,[e("div",Zt,[e("div",Ht,[e("p",{class:t(s.$style.label)},[v(" Реквизиты получателя "),Gt],2),e("p",Wt,n(s.dealOverview.seller_account.account),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.seller_account.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[Jt]),_:1})]),e("div",Qt,[o(i,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",eo,[e("div",so,[e("div",to,[e("p",{class:t(s.$style.label)},[v(" Ключи переданы "),oo],2),e("p",lo,n(s.dealOverview.keys_passed.value?"Да":"Нет"),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.keys_passed.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[uo]),_:1})]),e("div",no,[o(i,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",io,[e("div",ao,[e("div",co,[e("p",{class:t(s.$style.label)},[v(" Документы переданы "),ro],2),e("p",po,n(s.dealOverview.docs_passed.value?"Да":"Нет"),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.docs_passed.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[fo]),_:1})])]),vo],64)}const ho={$style:$t},_o=I(mt,[["render",mo],["__cssModules",ho],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainComplete.vue"]]),go="Данные отсутствуют",wo=L({components:{Card:x,Button:M},props:{dealOverview:Object},setup(s){const u=S(),d=u.params.projectID,r=u.params.dealID,p=O(()=>r==="create"),c=y(!1),i=O(()=>{var f,g,w,_,F,$,k,z;return!!(s.dealOverview&&((f=s.dealOverview.car)!=null&&f.complete)&&((g=s.dealOverview)!=null&&g.owner.complete)&&((w=s.dealOverview)!=null&&w.signer.complete)&&((_=s.dealOverview)!=null&&_.docs.complete)&&((F=s.dealOverview)!=null&&F.photos.complete)&&(($=s.dealOverview)!=null&&$.inspection_date_time.complete)&&((k=s.dealOverview)!=null&&k.inspection_address.complete)&&((z=s.dealOverview)!=null&&z.agreement.complete))}),h=f=>{if(f)return f.split("/").reverse()[0]},m=r==="create"?"Создание сделки":`Сделка № ${r}`;return{isCreating:p,projectID:d,dealID:r,dataEmpty:go,getFileName:h,disabledStartDeal:i,currencyFormat:U,title:m,toNegotiation:async()=>{c.value=!0,await H(r,"negotiation"),c.value=!1},isSaving:c}}}),bo="DealMainDraft_label_1691548270355",$o="DealMainDraft_doc_1691548270355",yo="DealMainDraft_docUploaded_1691548270355",Do={label:bo,doc:$o,docUploaded:yo},Co={class:"grid"},Eo={class:"col-12 md:col-4 lg:col-2"},Oo={class:"flex justify-content-between"},jo={class:"info flex flex-column gap-2"},ko={class:""},Bo=e("i",{class:"text-red-500"},"*",-1),Fo={class:""},Io={class:""},So={class:""},Ao={class:"flex justify-content-between align-items-center"},Mo={class:"text-sm"},Lo={class:"col-12 md:col-4 lg:col-2"},Uo={class:"flex justify-content-between"},xo={class:"info flex flex-column gap-2"},zo={class:""},Vo=e("i",{class:"text-red-500"},"*",-1),No={class:""},Ro={class:""},Po={class:""},To={class:"flex justify-content-between align-items-center"},qo={class:"text-sm"},Ko={class:"col-12 md:col-4 lg:col-2"},Xo={class:"flex justify-content-between"},Yo={class:"info flex flex-column gap-2"},Zo={class:""},Ho=e("i",{class:"text-red-500"},"*",-1),Go={class:""},Wo={class:""},Jo={class:""},Qo={class:"flex justify-content-between align-items-center"},el={class:"text-sm"},sl={class:"col-12 md:col-4 lg:col-2"},tl={class:"flex justify-content-between"},ol={class:"info flex flex-column gap-2"},ll={class:""},ul=e("i",{class:"text-red-500"},"*",-1),nl={class:"flex justify-content-between align-items-center"},il={class:"text-sm"},al={class:"col-12 md:col-4 lg:col-2"},cl={class:"flex justify-content-between"},dl={class:"info flex flex-column gap-2"},rl={class:""},pl=e("i",{class:"text-red-500"},"*",-1),fl={class:"flex justify-content-between align-items-center"},vl={class:"text-sm"},ml={class:"col-12 md:col-4 lg:col-2"},hl={class:"flex justify-content-between"},_l={class:"info flex flex-column gap-2"},gl={class:""},wl=e("i",{class:"text-red-500"},"*",-1),bl={class:""},$l={class:"flex justify-content-end align-items-center"},yl={class:"col-12 md:col-4 lg:col-2"},Dl={class:"flex justify-content-between"},Cl={class:"info flex flex-column gap-2"},El={class:""},Ol=e("i",{class:"text-red-500"},"*",-1),jl={class:""},kl={class:"flex justify-content-end align-items-center"},Bl={class:"col-12 md:col-4 lg:col-2"},Fl={class:"flex justify-content-between"},Il={class:"info flex flex-column gap-2"},Sl={class:""},Al={class:""},Ml={class:"flex justify-content-end align-items-center"},Ll={class:"col-12 md:col-4 lg:col-2"},Ul={class:"flex justify-content-between"},xl={class:"info flex flex-column gap-2"},zl={class:""},Vl={class:""},Nl={class:"flex justify-content-end align-items-center"},Rl={class:"flex justify-content-between"},Pl={class:"info flex flex-column gap-2"},Tl={class:""},ql={class:"flex justify-content-between align-items-center"},Kl=e("i",{class:"pi pi-file"},null,-1);function Xl(s,u,d,r,p,c){const i=b("Button"),h=b("Card"),m=b("router-link");return D(),C(V,null,[e("div",Co,[e("div",Eo,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/ts`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.car.complete}])},{content:l(()=>[e("div",Oo,[e("div",jo,[e("div",ko,[e("p",{class:t(s.$style.label)},[v(" Транспортное средство "),Bo],2),e("p",Fo,n(s.dealOverview.car.name),1)]),e("div",Io,[e("p",{class:t(s.$style.label)},"VIN",2),e("p",So,n(s.dealOverview.car.vin),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.car.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Ao,[e("p",Mo,n(s.dealOverview.car.fields_filled)+" из "+n(s.dealOverview.car.fields_total),1),o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",Lo,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/owner-ts`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.owner.complete}])},{content:l(()=>[e("div",Uo,[e("div",xo,[e("div",zo,[e("p",{class:t(s.$style.label)},[v(" Владелец ТС "),Vo],2),e("p",No,n(s.dealOverview.owner.name),1)]),e("div",Ro,[e("p",{class:t(s.$style.label)},"Контактный телефон",2),e("p",Po,n(s.dealOverview.owner.phone),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.owner.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",To,[e("p",qo,n(s.dealOverview.owner.fields_filled)+" из "+n(s.dealOverview.owner.fields_total),1),o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",Ko,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/signatory`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.signer.complete}])},{content:l(()=>[e("div",Xo,[e("div",Yo,[e("div",Zo,[e("p",{class:t(s.$style.label)},[v(" Подписант "),Ho],2),e("p",Go,n(s.dealOverview.signer.name),1)]),e("div",Wo,[e("p",{class:t(s.$style.label)},"Контактный телефон",2),e("p",Jo,n(s.dealOverview.signer.phone),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.signer.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Qo,[e("p",el,n(s.dealOverview.signer.fields_filled)+" из "+n(s.dealOverview.signer.fields_total),1),o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",sl,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/docs`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.docs.complete}])},{content:l(()=>[e("div",tl,[e("div",ol,[e("div",ll,[e("p",{class:t(s.$style.label)},[v(" Документы "),ul],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.docs.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",nl,[e("p",il,n(s.dealOverview.docs.fields_filled)+" из "+n(s.dealOverview.docs.fields_total),1),o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",al,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/photos`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.photos.complete}])},{content:l(()=>[e("div",cl,[e("div",dl,[e("div",rl,[e("p",{class:t(s.$style.label)},[v(" Фотографии ТС "),pl],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.photos.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",fl,[e("p",vl,n(s.dealOverview.photos.fields_filled)+" из "+n(s.dealOverview.photos.fields_total),1),o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",ml,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/date-and-time`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.inspection_date_time.complete}])},{content:l(()=>[e("div",hl,[e("div",_l,[e("div",gl,[e("p",{class:t(s.$style.label)},[v(" Дата и время сделки ТС "),wl],2),e("p",bl,n(s.dealOverview.inspection_date_time.date)+" "+n(s.dealOverview.inspection_date_time.time),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.inspection_date_time.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",$l,[o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",yl,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/place-of-transaction`,class:"h-full"},{default:l(()=>[o(h,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.inspection_address.complete}])},{content:l(()=>[e("div",Dl,[e("div",Cl,[e("div",El,[e("p",{class:t(s.$style.label)},[v(" Место сделки ТС "),Ol],2),e("p",jl,n(s.dealOverview.inspection_address.value),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.inspection_address.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",kl,[o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",Bl,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/declared-cost`,class:"h-full"},{default:l(()=>[o(h,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Fl,[e("div",Il,[e("div",Sl,[e("p",{class:t(s.$style.label)},"Желаемая стоимость ТС",2),e("p",Al,n(s.currencyFormat(s.dealOverview.declared_cost_field)),1)])])])]),footer:l(()=>[e("div",Ml,[o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",Ll,[o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/comment`,class:"h-full"},{default:l(()=>[o(h,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Ul,[e("div",xl,[e("div",zl,[e("p",{class:t(s.$style.label)},"Комментарии по сделке",2),e("p",Vl,n(s.dealOverview.comment),1)])])])]),footer:l(()=>[e("div",Nl,[o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])])]),o(m,{to:`/projects/${s.projectID}/deals/${s.dealID}/agrement`},{default:l(()=>[o(h,{class:t(["mb-4 mt-2",{"bg-green-50":s.dealOverview.agreement.complete}])},{content:l(()=>[e("div",Rl,[e("div",Pl,[e("div",Tl,[e("p",{class:t(s.$style.label)}," Согласие на обработку и хранение персональных данных ",2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.agreement.complete&&"text-green-500"])},null,2)])]),footer:l(()=>{var a,f;return[e("div",ql,[e("p",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"text-overflow-ellipsis"])},[Kl,v(" "+n(s.getFileName((f=(a=s.dealOverview.agreement)==null?void 0:a.value)==null?void 0:f.original_url)||s.dataEmpty),1)],2),o(i,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]}),_:1},8,["class"])]),_:1},8,["to"]),o(i,{type:"submit",label:"Начать сделку",disabled:!s.disabledStartDeal,onClick:s.toNegotiation,loading:s.isSaving},null,8,["disabled","onClick","loading"])],64)}const Yl={$style:Do},Zl=I(wo,[["render",Xl],["__cssModules",Yl],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainDraft.vue"]]);/*! js-cookie v3.0.1 | MIT */function Y(s){for(var u=1;u<arguments.length;u++){var d=arguments[u];for(var r in d)s[r]=d[r]}return s}var Hl={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function se(s,u){function d(p,c,i){if(typeof document!="undefined"){i=Y({},u,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),p=encodeURIComponent(p).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var h="";for(var m in i)i[m]&&(h+="; "+m,i[m]!==!0&&(h+="="+i[m].split(";")[0]));return document.cookie=p+"="+s.write(c,p)+h}}function r(p){if(!(typeof document=="undefined"||arguments.length&&!p)){for(var c=document.cookie?document.cookie.split("; "):[],i={},h=0;h<c.length;h++){var m=c[h].split("="),a=m.slice(1).join("=");try{var f=decodeURIComponent(m[0]);if(i[f]=s.read(a,f),p===f)break}catch(g){}}return p?i[p]:i}}return Object.create({set:d,get:r,remove:function(p,c){d(p,"",Y({},c,{expires:-1}))},withAttributes:function(p){return se(this.converter,Y({},this.attributes,p))},withConverter:function(p){return se(Y({},this.converter,p),this.attributes)}},{attributes:{value:Object.freeze(u)},converter:{value:Object.freeze(s)}})}se(Hl,{path:"/"});const Gl="Данные отсутствуют",Wl=new Map([["bank","Банк"]]),Jl=L({components:{Card:x,Button:M,FormCheckbox:ve,FormInput:G,FormLayout:fe,CancelDeal:oe,EnterCodeDeal:le},props:{dealOverview:Object},setup(s){var N,R,E,P,ue;const u=S(),{principalState:d}=X(),r=u.params.projectID,p=u.params.dealID,c=O(()=>p==="create"),i=y(!1),h=y(!1),m=y(!1),a=y(!1),f=y(null),g=y({allowed:(N=s.dealOverview.allowed)!=null&&N.value?s.dealOverview.allowed.value.toString():"0",recommended_cost:((E=(R=s.dealOverview)==null?void 0:R.recommended_cost)==null?void 0:E.value)||0,decision:((ue=(P=s.dealOverview)==null?void 0:P.decision)==null?void 0:ue.value)||""}),w=T({});q(async()=>{const A=await K(p);f.value=A.owner.phone});const _=O(()=>!(s.dealOverview.recommended_cost.complete&&s.dealOverview.declared_cost.complete&&s.dealOverview.dkp.complete&&s.dealOverview.balance.complete&&s.dealOverview.seller_account.complete&&s.dealOverview.pay_method.complete&&s.dealOverview.deal_cost.complete)),F=A=>{if(A)return A.split("/").reverse()[0]},$=async A=>{i.value=!0,(await H(p,A)).success&&(h.value=!0),i.value=!1},k=O(()=>g.value.allowed==="0"||g.value.decision===""||Number(g.value.recommended_cost)===0);return{isCreating:c,projectID:r,dealID:p,dataEmpty:Gl,getFileName:F,disabledStartDeal:_,currencyFormat:U,handleTransit:$,isSaving:i,paymentMethod:Wl,allowed:g,errors:w,handleAllowed:async()=>{i.value=!0;const A=await Ce(p,g.value);A.success||(w.isShow=!0,w.response=A),i.value=!1},isShowConfirmManager:h,isShowCancel:a,disabled:k,principalState:d,postManagerBeginConfirm:ye,postCustomerBeginConfirm:De,isShowConfirmCustomer:m,phoneOwner:f}}}),Ql="DealMainNegotiation_formCard_1691548270357",eu="DealMainNegotiation_label_1691548270358",su="DealMainNegotiation_required_1691548270358",tu="DealMainNegotiation_doc_1691548270358",ou="DealMainNegotiation_docUploaded_1691548270358",lu={formCard:Ql,label:eu,required:su,doc:tu,docUploaded:ou},uu={key:0,class:""},nu={key:0,class:"border-round-md surface-50 border-green-500 border-dashed border-1 p-4 mb-4"},iu=e("h2",null,"Необходимо ваше подтверждение",-1),au={class:"col-6"},cu=e("i",{class:"text-red-500"},"*",-1),du={class:"col-6"},ru={class:"col-12"},pu=e("i",{class:"text-red-500"},"*",-1),fu={class:"flex gap-2 justify-content-between col-12"},vu={class:"grid"},mu={class:"col-12 md:col-4 sm:col-6 mb-2"},hu={class:"flex justify-content-between"},_u={class:"info flex flex-column gap-2"},gu={class:""},wu=e("i",{class:"text-red-500"},"*",-1),bu={class:""},$u={class:""},yu={class:""},Du={class:"flex justify-content-between align-items-center"},Cu={class:"text-sm"},Eu={class:"col-12 md:col-4 sm:col-6 mb-2"},Ou={class:"flex justify-content-between"},ju={class:"info flex flex-column gap-2"},ku={class:""},Bu=e("i",{class:"text-red-500"},"*",-1),Fu={class:""},Iu={class:""},Su={class:""},Au={class:"flex justify-content-between align-items-center"},Mu={class:"text-sm"},Lu={class:"col-12 md:col-4 sm:col-6 mb-2"},Uu={class:"flex justify-content-between"},xu={class:"info flex flex-column gap-2"},zu={class:""},Vu=e("i",{class:"text-red-500"},"*",-1),Nu={class:""},Ru={class:""},Pu={class:""},Tu={class:"flex justify-content-between align-items-center"},qu={class:"text-sm"},Ku={class:"col-12 md:col-4 sm:col-6 mb-2"},Xu={class:"flex justify-content-between"},Yu={class:"info flex flex-column gap-2"},Zu={class:""},Hu=e("i",{class:"text-red-500"},"*",-1),Gu={class:"flex justify-content-between align-items-center"},Wu={class:"text-sm"},Ju={class:"col-12 md:col-4 sm:col-6 mb-2"},Qu={class:"flex justify-content-between"},e4={class:"info flex flex-column gap-2"},s4={class:""},t4=e("i",{class:"text-red-500"},"*",-1),o4={class:"flex justify-content-between align-items-center"},l4={class:"text-sm"},u4={class:"col-12 md:col-4 sm:col-6 mb-2"},n4={class:"flex justify-content-between"},i4={class:"info flex flex-column gap-2"},a4={class:""},c4=e("i",{class:"text-red-500"},"*",-1),d4={class:""},r4={class:"flex justify-content-end align-items-center"},p4={class:"col-12 md:col-4 sm:col-6 mb-2"},f4={class:"flex justify-content-between"},v4={class:"info flex flex-column gap-2"},m4={class:""},h4=e("i",{class:"text-red-500"},"*",-1),_4={class:""},g4={class:"flex justify-content-end align-items-center"},w4={class:"col-12 md:col-4 sm:col-6 mb-2"},b4={class:"flex justify-content-between"},$4={class:"info flex flex-column gap-2"},y4={class:""},D4={class:""},C4={class:"flex justify-content-end align-items-center"},E4={class:"col-12 md:col-4 sm:col-6 mb-2"},O4={class:"flex justify-content-between"},j4={class:"info flex flex-column gap-2"},k4={class:""},B4={class:""},F4={class:"flex justify-content-end align-items-center"},I4={class:"flex justify-content-between"},S4={class:"info flex flex-column gap-2"},A4={class:""},M4={class:"flex justify-content-between align-items-center"},L4=e("i",{class:"pi pi-file"},null,-1),U4={class:"grid mb-4"},x4={class:"col-4"},z4={class:"flex justify-content-between"},V4={class:"info flex flex-column gap-2"},N4={class:""},R4={class:""},P4={class:"col-4"},T4={class:"flex justify-content-between"},q4={class:"info flex flex-column gap-2"},K4={class:""},X4={class:""},Y4={class:"col-4"},Z4={class:"flex justify-content-between"},H4={class:"info flex flex-column gap-2"},G4={class:""},W4=e("i",{class:"text-red-500"},"*",-1),J4={class:""},Q4={class:"flex justify-content-end align-items-center"},en={class:"col-4"},sn={class:"flex justify-content-between"},tn={class:"info flex flex-column gap-2"},on={class:""},ln=e("i",{class:"text-red-500"},"*",-1),un={class:"flex justify-content-between align-items-center"},nn=e("i",{class:"pi pi-file"},null,-1),an={class:"text-overflow-ellipsis"},cn={class:"text-xs"},dn={class:"col-4"},rn={class:"flex justify-content-between"},pn={class:"info flex flex-column gap-2"},fn={class:""},vn=e("i",{class:"text-red-500"},"*",-1),mn={class:""},hn={class:"flex justify-content-between align-items-center"},_n={class:"text-sm text-red-500"},gn={class:"col-4"},wn={class:"flex justify-content-between"},bn={class:"info flex flex-column gap-2"},$n={class:""},yn=e("i",{class:"text-red-500"},"*",-1),Dn={class:""},Cn={class:"flex justify-content-end align-items-center"},En={class:"col-4"},On={class:"flex justify-content-between"},jn={class:"info flex flex-column gap-2"},kn={class:""},Bn=e("i",{class:"text-red-500"},"*",-1),Fn={class:""},In=e("div",{class:"flex justify-content-end align-items-center"},[j(` <Button
                  icon="pi pi-arrow-right"
                  class="p-button-sm p-button-outlined"
                /> `)],-1),Sn={class:"col-4"},An={class:"flex justify-content-between"},Mn={class:"info flex flex-column gap-2"},Ln={class:""},Un=e("i",{class:"text-red-500"},"*",-1),xn={class:""},zn={class:"flex justify-content-end align-items-center"},Vn={class:"flex gap-2 justify-content-between"};function Nn(s,u,d,r,p,c){var F;const i=b("CancelDeal"),h=b("EnterCodeDeal"),m=b("FormInput"),a=b("FormCheckbox"),f=b("Button"),g=b("FormLayout"),w=b("Card"),_=b("router-link");return D(),C(V,null,[o(i,{isShowConfirm:s.isShowCancel,callback:()=>s.isShowCancel=!1},null,8,["isShowConfirm","callback"]),o(h,{isShowConfirm:s.isShowConfirmManager,close:()=>s.isShowConfirmManager=!1,phone:(F=s.principalState.user)==null?void 0:F.phone,confirm:s.postManagerBeginConfirm,callback:()=>s.isShowConfirmCustomer=!0,title:"Подтвердите сделку кодом из СМС"},null,8,["isShowConfirm","close","phone","confirm","callback"]),o(h,{isShowConfirm:s.isShowConfirmCustomer,close:()=>s.isShowConfirmCustomer=!1,phone:s.phoneOwner,confirm:s.postCustomerBeginConfirm,title:"Подтвердите сделку кодом из СМС отправленного продавцу"},null,8,["isShowConfirm","close","phone","confirm"]),s.principalState.user.roles.includes("owner")?(D(),C("div",uu,[s.dealOverview.allowed.value===0?(D(),C("div",nu,[iu,o(g,{class:"grid"},{default:l(()=>[e("div",au,[o(m,{type:"text",name:"recommended_cost",modelValue:s.allowed.recommended_cost,"onUpdate:modelValue":u[0]||(u[0]=$=>s.allowed.recommended_cost=$),label:"Рекомендованная стоимость",showErrors:s.errors.isShow,as:"number",errorResponse:s.errors.response},{default:l(()=>[v("Рекомендованная стоимость "),cu]),_:1},8,["modelValue","showErrors","errorResponse"])]),e("div",du,[o(a,{name:"allowed",class:"mt-4",modelValue:s.allowed.allowed,"onUpdate:modelValue":u[1]||(u[1]=$=>s.allowed.allowed=$),label:"Разрешено",showErrors:s.errors.isShow,errorResponse:s.errors.response},null,8,["modelValue","showErrors","errorResponse"])]),e("div",ru,[o(m,{type:"text",name:"decision",modelValue:s.allowed.decision,"onUpdate:modelValue":u[2]||(u[2]=$=>s.allowed.decision=$),label:"Решение руководителя",showErrors:s.errors.isShow,errorResponse:s.errors.response},{default:l(()=>[v("Решение руководителя "),pu]),_:1},8,["modelValue","showErrors","errorResponse"])]),e("div",fu,[o(f,{type:"submit",label:"Подтвердить сделку",onClick:s.handleAllowed,loading:s.isSaving,disabled:s.disabled},null,8,["onClick","loading","disabled"]),o(f,{type:"submit",label:"Отменить сделку",loading:s.isSaving,severity:"danger",onClick:u[3]||(u[3]=$=>s.isShowConfirm=!0)},null,8,["loading"])])]),_:1})])):j("v-if",!0),e("div",vu,[e("div",mu,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/ts`,class:"h-full"},{default:l(()=>{var $,k;return[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":(k=($=s.dealOverview)==null?void 0:$.car)==null?void 0:k.complete}])},{content:l(()=>[e("div",hu,[e("div",_u,[e("div",gu,[e("p",{class:t(s.$style.label)},[v(" Транспортное средство "),wu],2),e("p",bu,n(s.dealOverview.car.name),1)]),e("div",$u,[e("p",{class:t(s.$style.label)},"VIN",2),e("p",yu,n(s.dealOverview.car.vin),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.car.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Du,[e("p",Cu,n(s.dealOverview.car.fields_filled)+" из "+n(s.dealOverview.car.fields_total),1),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]}),_:1},8,["to"])]),e("div",Eu,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/owner-ts`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.owner.complete}])},{content:l(()=>[e("div",Ou,[e("div",ju,[e("div",ku,[e("p",{class:t(s.$style.label)},[v(" Владелец ТС "),Bu],2),e("p",Fu,n(s.dealOverview.owner.name),1)]),e("div",Iu,[e("p",{class:t(s.$style.label)},"Контактный телефон",2),e("p",Su,n(s.dealOverview.owner.phone),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.owner.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Au,[e("p",Mu,n(s.dealOverview.owner.fields_filled)+" из "+n(s.dealOverview.owner.fields_total),1),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",Lu,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/signatory`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.signer.complete}])},{content:l(()=>[e("div",Uu,[e("div",xu,[e("div",zu,[e("p",{class:t(s.$style.label)},[v(" Подписант "),Vu],2),e("p",Nu,n(s.dealOverview.signer.name),1)]),e("div",Ru,[e("p",{class:t(s.$style.label)},"Контактный телефон",2),e("p",Pu,n(s.dealOverview.signer.phone),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.signer.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Tu,[e("p",qu,n(s.dealOverview.signer.fields_filled)+" из "+n(s.dealOverview.signer.fields_total),1),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",Ku,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/docs`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.docs.complete}])},{content:l(()=>[e("div",Xu,[e("div",Yu,[e("div",Zu,[e("p",{class:t(s.$style.label)},[v(" Документы "),Hu],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.docs.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Gu,[e("p",Wu,n(s.dealOverview.docs.fields_filled)+" из "+n(s.dealOverview.docs.fields_total),1),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",Ju,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/photos`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.photos.complete}])},{content:l(()=>[e("div",Qu,[e("div",e4,[e("div",s4,[e("p",{class:t(s.$style.label)},[v(" Фотографии ТС "),t4],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.photos.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",o4,[e("p",l4,n(s.dealOverview.photos.fields_filled)+" из "+n(s.dealOverview.photos.fields_total),1),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",u4,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/date-and-time`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.inspection_date_time.complete}])},{content:l(()=>[e("div",n4,[e("div",i4,[e("div",a4,[e("p",{class:t(s.$style.label)},[v(" Дата и время сделки ТС "),c4],2),e("p",d4,n(s.dealOverview.inspection_date_time.date)+" "+n(s.dealOverview.inspection_date_time.time),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.inspection_date_time.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",r4,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",p4,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/place-of-transaction`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.inspection_address.complete}])},{content:l(()=>[e("div",f4,[e("div",v4,[e("div",m4,[e("p",{class:t(s.$style.label)},[v(" Место сделки ТС "),h4],2),e("p",_4,n(s.dealOverview.inspection_address.value),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.inspection_address.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",g4,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",w4,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/declared-cost`,class:"h-full"},{default:l(()=>[o(w,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",b4,[e("div",$4,[e("div",y4,[e("p",{class:t(s.$style.label)},"Желаемая стоимость ТС",2),e("p",D4,n(s.currencyFormat(s.dealOverview.declared_cost_field)),1)])])])]),footer:l(()=>[e("div",C4,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",E4,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/comment`,class:"h-full"},{default:l(()=>[o(w,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",O4,[e("div",j4,[e("div",k4,[e("p",{class:t(s.$style.label)},"Комментарии по сделке",2),e("p",B4,n(s.dealOverview.comment),1)])])])]),footer:l(()=>[e("div",F4,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])])]),o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/agrement`},{default:l(()=>[o(w,{class:t(["mb-4 mt-2",{"bg-green-50":s.dealOverview.agreement.complete}])},{content:l(()=>[e("div",I4,[e("div",S4,[e("div",A4,[e("p",{class:t(s.$style.label)}," Согласие на обработку и хранение персональных данных ",2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.agreement.complete&&"text-green-500"])},null,2)])]),footer:l(()=>{var $,k;return[e("div",M4,[e("p",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"text-overflow-ellipsis"])},[L4,v(" "+n(s.getFileName((k=($=s.dealOverview.agreement)==null?void 0:$.value)==null?void 0:k.original_url)||s.dataEmpty),1)],2),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]}),_:1},8,["class"])]),_:1},8,["to"])])):j("v-if",!0),e("div",null,[e("div",U4,[e("div",x4,[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.decision.complete}])},{content:l(()=>[e("div",z4,[e("div",V4,[e("div",N4,[e("p",{class:t(s.$style.label)},"Решение руководства",2),e("p",R4,n(s.dealOverview.decision.value?"Разрешено":"Не разрешено"),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.decision.complete&&"text-green-500"])},null,2)])]),_:1},8,["class"])]),e("div",P4,[o(w,{class:t(["h-full card-footer-bottom",s.dealOverview.recommended_cost.complete?"bg-green-50":"bg-orange-50"])},{content:l(()=>[e("div",T4,[e("div",q4,[e("div",K4,[e("p",{class:t(s.$style.label)},"Рекомендуемая стоимость",2),e("p",X4,n(s.currencyFormat(s.dealOverview.recommended_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.recommended_cost.complete&&"text-green-500"])},null,2)])]),_:1},8,["class"])]),e("div",Y4,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/declared-cost`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.declared_cost.complete}])},{content:l(()=>[e("div",Z4,[e("div",H4,[e("div",G4,[e("p",{class:t(s.$style.label)},[v(" Согласованная стоимость "),W4],2),e("p",J4,n(s.currencyFormat(s.dealOverview.declared_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.declared_cost.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Q4,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",en,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/dkp`},{default:l(()=>[o(w,{class:t({"bg-green-50":s.dealOverview.dkp.complete})},{content:l(()=>[e("div",sn,[e("div",tn,[e("div",on,[e("p",{class:t(s.$style.label)},[v(" Договор купли-продажи ТС "),ln],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.dkp.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",un,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[nn,e("div",null,[e("p",an,n(s.dealOverview.dkp.value||"Договор не сформирован"),1),e("p",cn," Дата подписания: "+n(s.dealOverview.dkp.date?s.dealOverview.dkp.date:"не подписан"),1)])],2),o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",dn,[o(w,{class:t(["h-full card-footer-bottom border-solid border-1",s.dealOverview.balance.complete?"bg-green-50":"border-red-500"])},{content:l(()=>[e("div",rn,[e("div",pn,[e("div",fn,[e("p",{class:t(s.$style.label)},[v(" Баланс резервного счета "),vn],2),e("p",mn,n(s.dealOverview.balance.value),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.balance.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",hn,[e("p",_n,n(s.dealOverview.balance.complete?"":`* С учетом комиссии на счету должно быть минимум ${s.currencyFormat(s.dealOverview.balance.required)}`),1)])]),_:1},8,["class"])]),e("div",gn,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/seller-account`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.seller_account.complete}])},{content:l(()=>[e("div",wn,[e("div",bn,[e("div",$n,[e("p",{class:t(s.$style.label)},[v(" Реквизиты получателя "),yn],2),e("p",Dn,n(s.dealOverview.seller_account.account),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.seller_account.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Cn,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])]),e("div",En,[o(_,{to:"#",class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.pay_method.complete}])},{content:l(()=>[e("div",On,[e("div",jn,[e("div",kn,[e("p",{class:t(s.$style.label)},[v(" Способ оплаты "),Bn],2),e("p",Fn,n(s.paymentMethod.get(s.dealOverview.pay_method.value)||s.dataEmpty),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.pay_method.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[In]),_:1},8,["class"])]),_:1})]),e("div",Sn,[o(_,{to:`/projects/${s.projectID}/deals/${s.dealID}/cost`,class:"h-full"},{default:l(()=>[o(w,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.deal_cost.complete}])},{content:l(()=>[e("div",An,[e("div",Mn,[e("div",Ln,[e("p",{class:t(s.$style.label)},[v(" Стоимость в договоре "),Un],2),e("p",xn,n(s.currencyFormat(s.dealOverview.deal_cost.value||0)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.deal_cost.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",zn,[o(f,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1},8,["class"])]),_:1},8,["to"])])]),e("div",Vn,[o(f,{type:"submit",label:"Отправить сделку в банк",disabled:s.disabledStartDeal,onClick:u[4]||(u[4]=()=>s.handleTransit("begin")),loading:s.isSaving},null,8,["disabled","loading"]),o(f,{type:"submit",label:"Отменить сделку",loading:s.isSaving,severity:"danger",onClick:u[5]||(u[5]=$=>s.isShowCancel=!0)},null,8,["loading"])])])],64)}const Rn={$style:lu},Pn=I(Jl,[["render",Nn],["__cssModules",Rn],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainNegotiation.vue"]]),Tn="Данные отсутствуют",qn=new Map([["bank","Банк"]]),Kn=L({components:{Card:x,Button:M},props:{dealOverview:Object},setup(s){const u=S(),d=u.params.projectID,r=u.params.dealID,p=O(()=>r==="create"),c=y(!1),i=O(()=>!!Object.values(s.dealOverview).filter(a=>a&&typeof a.complete=="boolean").find(({complete:a})=>!a));return{isCreating:p,projectID:d,dealID:r,dataEmpty:Tn,getFileName:a=>{if(a)return a.split("/").reverse()[0]},disabledStartDeal:i,currencyFormat:U,toNegotiation:async()=>{c.value=!0,await H(r,"negotiation"),c.value=!1},isSaving:c,paymentMethod:qn}}}),Xn="DealMainSuccess_formCard_1691548270351",Yn="DealMainSuccess_label_1691548270351",Zn="DealMainSuccess_required_1691548270351",Hn="DealMainSuccess_doc_1691548270351",Gn="DealMainSuccess_docUploaded_1691548270351",Wn={formCard:Xn,label:Yn,required:Zn,doc:Hn,docUploaded:Gn},Jn={class:"grid mb-4"},Qn={class:"col-4"},ei={class:"info flex flex-column gap-2"},si={class:""},ti={class:""},oi={class:"col-4"},li={class:"flex justify-content-between"},ui={class:"info flex flex-column gap-2"},ni={class:""},ii=e("i",{class:"text-red-500"},"*",-1),ai={class:"flex justify-content-between align-items-center"},ci=e("i",{class:"pi pi-file"},null,-1),di={class:"text-overflow-ellipsis"},ri={class:"text-xs"},pi={class:"col-4"},fi={class:"flex justify-content-between"},vi={class:"info flex flex-column gap-2"},mi={class:""},hi=e("i",{class:"text-red-500"},"*",-1),_i={class:"flex justify-content-between align-items-center"},gi=e("i",{class:"pi pi-file"},null,-1),wi={class:"text-overflow-ellipsis"},bi={class:"text-xs"},$i={class:"col-4"},yi={class:"flex justify-content-between"},Di={class:"info flex flex-column gap-2"},Ci={class:""},Ei=e("i",{class:"text-red-500"},"*",-1),Oi={class:""},ji=e("div",{class:"flex justify-content-end align-items-center"},null,-1),ki={class:"col-4"},Bi={class:"flex justify-content-between"},Fi={class:"info flex flex-column gap-2"},Ii={class:""},Si=e("i",{class:"text-red-500"},"*",-1),Ai={class:""},Mi=e("div",{class:"flex justify-content-end align-items-center"},[j(` <Button
                icon="pi pi-arrow-right"
                class="p-button-sm p-button-outlined"
              /> `)],-1),Li={class:"col-4"},Ui={class:"flex justify-content-between"},xi={class:"info flex flex-column gap-2"},zi={class:""},Vi=e("i",{class:"text-red-500"},"*",-1),Ni={class:""},Ri=e("div",{class:"flex justify-content-end align-items-center"},null,-1),Pi={class:"col-4"},Ti={class:"flex justify-content-between"},qi={class:"info flex flex-column gap-2"},Ki={class:""},Xi=e("i",{class:"text-red-500"},"*",-1),Yi={class:""},Zi={class:"flex justify-content-between align-items-center"},Hi={class:"text-sm text-red-500"},Gi=e("div",{class:"bg-green-100 border-1 border-round-md border-solid border-green-500 text-xl text-center py-5"},"Сделка успешно завершена",-1);function Wi(s,u,d,r,p,c){const i=b("Card");return D(),C(V,null,[e("div",Jn,[e("div",Qn,[o(i,{class:t(["h-full card-footer-bottom",s.dealOverview.recommended_cost.complete?"bg-green-50":"bg-orange-50"])},{content:l(()=>[e("div",{class:t(["flex justify-content-between",{"bg-green-50":s.dealOverview.recommended_cost.complete}])},[e("div",ei,[e("div",si,[e("p",{class:t(s.$style.label)},"Рекомендуемая стоимость",2),e("p",ti,n(s.currencyFormat(s.dealOverview.recommended_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.recommended_cost.complete&&"text-green-500"])},null,2)],2)]),_:1},8,["class"])]),e("div",oi,[o(i,{class:t({"bg-green-50":s.dealOverview.dkp.complete})},{content:l(()=>[e("div",li,[e("div",ui,[e("div",ni,[e("p",{class:t(s.$style.label)},[v(" Договор купли-продажи ТС "),ii],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.dkp.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",ai,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[ci,e("div",null,[e("p",di,n(s.dealOverview.dkp.value||"Договор не сформирован"),1),e("p",ri," Дата подписания: "+n(s.dealOverview.dkp.date?s.dealOverview.dkp.date:"не подписан"),1)])],2)])]),_:1},8,["class"])]),e("div",pi,[o(i,{class:t({"bg-green-50":s.dealOverview.acceptance.complete})},{content:l(()=>[e("div",fi,[e("div",vi,[e("div",mi,[e("p",{class:t(s.$style.label)},[v(" Соглашение ТС "),hi],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.acceptance.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",_i,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[gi,e("div",null,[e("p",wi,n(s.dealOverview.acceptance.value||"Договор не сформирован"),1),e("p",bi," Дата подписания: "+n(s.dealOverview.acceptance.date?s.dealOverview.acceptance.date:"не подписан"),1)])],2)])]),_:1},8,["class"])]),e("div",$i,[o(i,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.seller_account.complete}])},{content:l(()=>[e("div",yi,[e("div",Di,[e("div",Ci,[e("p",{class:t(s.$style.label)},[v(" Реквизиты получателя "),Ei],2),e("p",Oi,n(s.dealOverview.seller_account.account),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.seller_account.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[ji]),_:1},8,["class"])]),e("div",ki,[o(i,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.keys_passed.complete}])},{content:l(()=>[e("div",Bi,[e("div",Fi,[e("div",Ii,[e("p",{class:t(s.$style.label)},[v(" Ключи переданы "),Si],2),e("p",Ai,n(s.dealOverview.keys_passed.value?"Да":"Нет"),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.keys_passed.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[Mi]),_:1},8,["class"])]),e("div",Li,[o(i,{class:t(["h-full card-footer-bottom",{"bg-green-50":s.dealOverview.docs_passed.complete}])},{content:l(()=>[e("div",Ui,[e("div",xi,[e("div",zi,[e("p",{class:t(s.$style.label)},[v(" Документы переданы "),Vi],2),e("p",Ni,n(s.dealOverview.docs_passed.value?"Да":"Нет"),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.docs_passed.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[Ri]),_:1},8,["class"])]),e("div",Pi,[o(i,{class:t(["h-full card-footer-bottom",s.dealOverview.balance.complete?"bg-green-50":"border-red-500"])},{content:l(()=>[e("div",Ti,[e("div",qi,[e("div",Ki,[e("p",{class:t(s.$style.label)},[v(" Баланс резервного счета "),Xi],2),e("p",Yi,n(s.dealOverview.balance.value),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.balance.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Zi,[e("p",Hi,n(s.dealOverview.balance.complete?"":`* С учетом комиссии на счету должно быть минимум ${s.currencyFormat(s.dealOverview.balance.required)}`),1)])]),_:1},8,["class"])])]),Gi],64)}const Ji={$style:Wn},Qi=I(Kn,[["render",Wi],["__cssModules",Ji],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainSuccess.vue"]]),ea="Данные отсутствуют",sa=new Map([["bank","Банк"]]),ta=L({components:{Card:x,Button:M,InputSwitch:pe,CancelDeal:oe,EnterCodeDeal:le},props:{dealOverview:Object},setup(){const s=S(),{principalState:u}=X(),d=s.params.projectID,r=s.params.dealID,p=O(()=>r==="create"),c=y(null),i=y(!1),h=y(!1),m=y(!1),a=T({}),f=y(null);q(async()=>{const _=await K(r);f.value=_.owner.phone});const g=O(()=>u.deal?{dkp:u.deal.data.dkp.dkp_photos.map(({original_url:_})=>_),acceptance:u.deal.data.acceptance.acceptance_photos.map(({original_url:_})=>_)}:{dkp:[],acceptance:[]});return{isCreating:p,projectID:d,dealID:r,dataEmpty:ea,getFileName:_=>{if(_)return _.split("/").reverse()[0]},currencyFormat:U,isSaving:i,paymentMethod:sa,errors:a,isShowConfirmChief:m,isShowCancel:h,principalState:u,postKeysPassed:de,postDocsPassed:re,phoneOwner:f,postPaymentConfirm:Ee,imgsShow:c,imgsPack:g}}}),oa="DealMainConfirmation_formCard_1691548270360 DealMainConfirmation_formCard_1691548270361",la="DealMainConfirmation_label_1691548270361",ua="DealMainConfirmation_required_1691548270361",na="DealMainConfirmation_doc_1691548270361",ia="DealMainConfirmation_docUploaded_1691548270361",aa={formCard:oa,label:la,required:ua,doc:na,docUploaded:ia},ca=e("div",{class:"border-round-md surface-50 border-red-500 border-dashed border-1 p-4 mb-4"},[e("h3",{class:"text-red-500"},"Внимание!"),e("p",null," Сделка требует вашей верификации ")],-1),da={key:0,class:""},ra={class:"grid"},pa={class:"col-4"},fa={class:"flex justify-content-between"},va={class:"info flex flex-column gap-2"},ma={class:""},ha=e("i",{class:"text-red-500"},"*",-1),_a={class:""},ga={class:""},wa={class:""},ba={class:"flex justify-content-between align-items-center"},$a={class:"text-sm"},ya={class:"col-4"},Da={class:"flex justify-content-between"},Ca={class:"info flex flex-column gap-2"},Ea={class:""},Oa=e("i",{class:"text-red-500"},"*",-1),ja={class:""},ka={class:""},Ba={class:""},Fa={class:"flex justify-content-between align-items-center"},Ia={class:"text-sm"},Sa={class:"col-4"},Aa={class:"flex justify-content-between"},Ma={class:"info flex flex-column gap-2"},La={class:""},Ua=e("i",{class:"text-red-500"},"*",-1),xa={class:""},za={class:""},Va={class:""},Na={class:"flex justify-content-between align-items-center"},Ra={class:"text-sm"},Pa={class:"col-4"},Ta={class:"flex justify-content-between"},qa={class:"info flex flex-column gap-2"},Ka={class:""},Xa=e("i",{class:"text-red-500"},"*",-1),Ya={class:"flex justify-content-between align-items-center"},Za={class:"text-sm"},Ha={class:"col-4"},Ga={class:"flex justify-content-between"},Wa={class:"info flex flex-column gap-2"},Ja={class:""},Qa=e("i",{class:"text-red-500"},"*",-1),e0={class:"flex justify-content-between align-items-center"},s0={class:"text-sm"},t0={class:"col-4"},o0={class:"flex justify-content-between"},l0={class:"info flex flex-column gap-2"},u0={class:""},n0=e("i",{class:"text-red-500"},"*",-1),i0={class:""},a0={class:"flex justify-content-end align-items-center"},c0={class:"col-4"},d0={class:"flex justify-content-between"},r0={class:"info flex flex-column gap-2"},p0={class:""},f0=e("i",{class:"text-red-500"},"*",-1),v0={class:""},m0={class:"flex justify-content-end align-items-center"},h0={class:"col-4"},_0={class:"flex justify-content-between"},g0={class:"info flex flex-column gap-2"},w0={class:""},b0={class:""},$0={class:"flex justify-content-end align-items-center"},y0={class:"col-4"},D0={class:"flex justify-content-between"},C0={class:"info flex flex-column gap-2"},E0={class:""},O0={class:""},j0={class:"flex justify-content-end align-items-center"},k0={class:"flex justify-content-between"},B0={class:"info flex flex-column gap-2"},F0={class:""},I0={class:"flex justify-content-between align-items-center"},S0=e("i",{class:"pi pi-file"},null,-1),A0={class:"grid mb-4"},M0={class:"col-4"},L0={class:"flex justify-content-between"},U0={class:"info flex flex-column gap-2"},x0={class:""},z0={class:""},V0={class:"col-4"},N0={class:"flex justify-content-between"},R0={class:"info flex flex-column gap-2"},P0={class:""},T0={class:""},q0={class:"col-4"},K0={class:"flex justify-content-between"},X0={class:"info flex flex-column gap-2"},Y0={class:""},Z0=e("i",{class:"text-red-500"},"*",-1),H0={class:""},G0={class:"flex justify-content-end align-items-center"},W0={class:"col-4"},J0={class:"flex justify-content-between"},Q0={class:"info flex flex-column gap-2"},ec={class:""},sc=e("i",{class:"text-red-500"},"*",-1),tc={class:""},oc={class:"flex justify-content-end align-items-center"},lc={class:"col-4"},uc={class:"flex justify-content-between"},nc={class:"info flex flex-column gap-2"},ic={class:""},ac=e("i",{class:"text-red-500"},"*",-1),cc={class:""},dc=e("div",{class:"flex justify-content-end align-items-center"},[j(` <Button
                    icon="pi pi-arrow-right"
                    class="p-button-sm p-button-outlined"
                  /> `)],-1),rc={class:"col-4"},pc={class:"flex justify-content-between"},fc={class:"info flex flex-column gap-2"},vc={class:""},mc=e("i",{class:"text-red-500"},"*",-1),hc={class:""},_c={class:"flex justify-content-end align-items-center"},gc={class:"grid mb-4"},wc={class:"col-4"},bc={class:"flex justify-content-between"},$c={class:"info flex flex-column gap-2"},yc={class:""},Dc={class:""},Cc={class:"col-4"},Ec={class:"flex justify-content-between"},Oc={class:"info flex flex-column gap-2"},jc={class:""},kc=e("i",{class:"text-red-500"},"*",-1),Bc=e("p",{class:""}," Средства на счете успешно зарезервированы ",-1),Fc={class:"col-4"},Ic={class:"flex justify-content-between"},Sc={class:"info flex flex-column gap-2"},Ac={class:""},Mc=e("i",{class:"text-red-500"},"*",-1),Lc={class:"flex justify-content-between align-items-center"},Uc=e("i",{class:"pi pi-file"},null,-1),xc={class:"text-overflow-ellipsis"},zc={class:"text-xs"},Vc={class:"col-4"},Nc={class:"flex justify-content-between"},Rc={class:"info flex flex-column gap-2"},Pc={class:""},Tc=e("i",{class:"text-red-500"},"*",-1),qc={class:"flex justify-content-between align-items-center"},Kc=e("i",{class:"pi pi-file"},null,-1),Xc={class:"text-overflow-ellipsis"},Yc={class:"text-xs"},Zc={class:"col-4"},Hc={class:"flex justify-content-between"},Gc={class:"info flex flex-column gap-2"},Wc={class:""},Jc=e("i",{class:"text-red-500"},"*",-1),Qc={class:"flex mt-2"},ed=e("p",{class:"ml-3"},"Документы переданы ",-1),sd={class:"col-4"},td={class:"flex justify-content-between"},od={class:"info flex flex-column gap-2"},ld={class:""},ud=e("i",{class:"text-red-500"},"*",-1),nd={class:"flex mt-2"},id=e("p",{class:"ml-3"},"Ключи переданы ",-1),ad={class:"flex gap-2 justify-content-between"};function cd(s,u,d,r,p,c){var _,F,$,k,z,N,R;const i=b("CancelDeal"),h=b("vue-easy-lightbox"),m=b("EnterCodeDeal"),a=b("Button"),f=b("Card"),g=b("router-link"),w=b("InputSwitch");return D(),C(V,null,[o(i,{isShowConfirm:s.isShowCancel,callback:()=>s.isShowCancel=!1},null,8,["isShowConfirm","callback"]),o(h,{visible:!!s.imgsShow,imgs:s.imgsPack[s.imgsShow],index:0,onHide:u[0]||(u[0]=E=>s.imgsShow=null)},null,8,["visible","imgs"]),o(m,{isShowConfirm:s.isShowConfirmChief,close:()=>s.isShowConfirmChief=!1,phone:(_=s.principalState.user)==null?void 0:_.phone,confirm:s.postPaymentConfirm,title:"Подтвердите оплату"},null,8,["isShowConfirm","close","phone","confirm"]),ca,s.principalState.user.roles.includes("owner")?(D(),C("div",da,[e("div",ra,[e("div",pa,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/ts`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",fa,[e("div",va,[e("div",ma,[e("p",{class:t(s.$style.label)},[v(" Транспортное средство "),ha],2),e("p",_a,n(s.dealOverview.car.name),1)]),e("div",ga,[e("p",{class:t(s.$style.label)},"VIN",2),e("p",wa,n(s.dealOverview.car.vin),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.car.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",ba,[e("p",$a,n(s.dealOverview.car.fields_filled)+" из "+n(s.dealOverview.car.fields_total),1),o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",ya,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/owner-ts`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Da,[e("div",Ca,[e("div",Ea,[e("p",{class:t(s.$style.label)},[v(" Владелец ТС "),Oa],2),e("p",ja,n(s.dealOverview.owner.name),1)]),e("div",ka,[e("p",{class:t(s.$style.label)},"Контактный телефон",2),e("p",Ba,n(s.dealOverview.owner.phone),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.owner.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Fa,[e("p",Ia,n(s.dealOverview.owner.fields_filled)+" из "+n(s.dealOverview.owner.fields_total),1),o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",Sa,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/signatory`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Aa,[e("div",Ma,[e("div",La,[e("p",{class:t(s.$style.label)},[v(" Подписант "),Ua],2),e("p",xa,n(s.dealOverview.signer.name),1)]),e("div",za,[e("p",{class:t(s.$style.label)},"Контактный телефон",2),e("p",Va,n(s.dealOverview.signer.phone),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.signer.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Na,[e("p",Ra,n(s.dealOverview.signer.fields_filled)+" из "+n(s.dealOverview.signer.fields_total),1),o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",Pa,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/docs`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Ta,[e("div",qa,[e("div",Ka,[e("p",{class:t(s.$style.label)},[v(" Документы "),Xa],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.docs.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Ya,[e("p",Za,n(s.dealOverview.docs.fields_filled)+" из "+n(s.dealOverview.docs.fields_total),1),o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",Ha,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/photos`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",Ga,[e("div",Wa,[e("div",Ja,[e("p",{class:t(s.$style.label)},[v(" Фотографии ТС "),Qa],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.photos.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",e0,[e("p",s0,n(s.dealOverview.photos.fields_filled)+" из "+n(s.dealOverview.photos.fields_total),1),o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",t0,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/date-and-time`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",o0,[e("div",l0,[e("div",u0,[e("p",{class:t(s.$style.label)},[v(" Дата и время сделки ТС "),n0],2),e("p",i0,n(s.dealOverview.inspection_date_time.date)+" "+n(s.dealOverview.inspection_date_time.time),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.inspection_date_time.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",a0,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",c0,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/place-of-transaction`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",d0,[e("div",r0,[e("div",p0,[e("p",{class:t(s.$style.label)},[v(" Место сделки ТС "),f0],2),e("p",v0,n(s.dealOverview.inspection_address.value),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.inspection_address.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",m0,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",h0,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/declared-cost`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",_0,[e("div",g0,[e("div",w0,[e("p",{class:t(s.$style.label)},"Желаемая стоимость ТС",2),e("p",b0,n(s.currencyFormat(s.dealOverview.declared_cost_field)),1)])])])]),footer:l(()=>[e("div",$0,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",y0,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/comment`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",D0,[e("div",C0,[e("div",E0,[e("p",{class:t(s.$style.label)},"Комментарии по сделке",2),e("p",O0,n(s.dealOverview.comment),1)])])])]),footer:l(()=>[e("div",j0,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])])]),o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/agrement`},{default:l(()=>[o(f,{class:"mb-4 mt-2"},{content:l(()=>[e("div",k0,[e("div",B0,[e("div",F0,[e("p",{class:t(s.$style.label)}," Согласие на обработку и хранение персональных данных ",2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.agreement.complete&&"text-green-500"])},null,2)])]),footer:l(()=>{var E,P;return[e("div",I0,[e("p",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"text-overflow-ellipsis"])},[S0,v(" "+n(s.getFileName((P=(E=s.dealOverview.agreement)==null?void 0:E.value)==null?void 0:P.original_url)||s.dataEmpty),1)],2),o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]}),_:1})]),_:1},8,["to"]),e("div",A0,[e("div",M0,[o(f,{class:"h-full card-footer-bottom bg-green-50"},{content:l(()=>[e("div",L0,[e("div",U0,[e("div",x0,[e("p",{class:t(s.$style.label)},"Решение руководства",2),e("p",z0,n(s.dealOverview.decision.value),1)])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),_:1})]),e("div",V0,[o(f,{class:t(["h-full card-footer-bottom",s.dealOverview.recommended_cost.complete?"bg-green-50":"bg-orange-50"])},{content:l(()=>[e("div",N0,[e("div",R0,[e("div",P0,[e("p",{class:t(s.$style.label)},"Рекомендуемая стоимость",2),e("p",T0,n(s.currencyFormat(s.dealOverview.recommended_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.recommended_cost.complete&&"text-green-500"])},null,2)])]),_:1},8,["class"])]),e("div",q0,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/declared-cost`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",K0,[e("div",X0,[e("div",Y0,[e("p",{class:t(s.$style.label)},[v(" Согласованная стоимость "),Z0],2),e("p",H0,n(s.currencyFormat(s.dealOverview.declared_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.declared_cost.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",G0,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",W0,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/seller-account`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",J0,[e("div",Q0,[e("div",ec,[e("p",{class:t(s.$style.label)},[v(" Реквизиты получателя "),sc],2),e("p",tc,n(s.dealOverview.seller_account.account),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.seller_account.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",oc,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])]),e("div",lc,[o(g,{to:"#",class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",uc,[e("div",nc,[e("div",ic,[e("p",{class:t(s.$style.label)},[v(" Способ оплаты "),ac],2),e("p",cc,n(s.paymentMethod.get(s.dealOverview.pay_method.value)||s.dataEmpty),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.pay_method.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[dc]),_:1})]),_:1})]),e("div",rc,[o(g,{to:`/projects/${s.projectID}/deals/${s.dealID}/cost`,class:"h-full"},{default:l(()=>[o(f,{class:"h-full card-footer-bottom"},{content:l(()=>[e("div",pc,[e("div",fc,[e("div",vc,[e("p",{class:t(s.$style.label)},[v(" Стоимость в договоре "),mc],2),e("p",hc,n(s.currencyFormat(s.dealOverview.deal_cost.value||0)),1)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.deal_cost.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",_c,[o(a,{icon:"pi pi-arrow-right",class:"p-button-sm p-button-outlined"})])]),_:1})]),_:1},8,["to"])])])])):j("v-if",!0),e("div",gc,[e("div",wc,[o(f,{class:t(["h-full card-footer-bottom","bg-green-50"])},{content:l(()=>[e("div",bc,[e("div",$c,[e("div",yc,[e("p",{class:t(s.$style.label)},"Согласованная стоимость",2),e("p",Dc,n(s.currencyFormat(s.dealOverview.recommended_cost.value)),1)])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),_:1})]),e("div",Cc,[o(f,{class:t(["h-full card-footer-bottom","bg-green-50"])},{content:l(()=>[e("div",Ec,[e("div",Oc,[e("div",jc,[e("p",{class:t(s.$style.label)},[v(" Баланс резервного счета "),kc],2),v(" "+n(s.dealOverview.balance.required)+" ",1),Bc])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),_:1})]),e("div",Fc,[o(f,{onClick:u[1]||(u[1]=E=>s.imgsShow="dkp"),class:t({"bg-green-50":s.dealOverview.dkp.complete})},{content:l(()=>[e("div",Ic,[e("div",Sc,[e("div",Ac,[e("p",{class:t(s.$style.label)},[v(" Договор купли-продажи ТС "),Mc],2)])]),e("i",{class:t(["pi pi-check-circle",s.dealOverview.dkp.complete&&"text-green-500"])},null,2)])]),footer:l(()=>[e("div",Lc,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[Uc,e("div",null,[e("p",xc,n(s.dealOverview.dkp.value?`Договор №: ${s.dealOverview.dkp.value}`:"Договор не сформирован"),1),e("p",zc," Дата подписания: "+n(s.dealOverview.dkp.date?s.dealOverview.dkp.date:"не подписан"),1)])],2)])]),_:1},8,["class"])]),e("div",Vc,[o(f,{class:t(["h-full card-footer-bottom",{"bg-green-50":($=(F=s.dealOverview)==null?void 0:F.acceptance)==null?void 0:$.value}]),onClick:u[2]||(u[2]=E=>s.imgsShow="acceptance")},{content:l(()=>[e("div",Nc,[e("div",Rc,[e("div",Pc,[e("p",{class:t(s.$style.label)},[v(" Акт приема передачи "),Tc],2)])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),footer:l(()=>[e("div",qc,[e("div",{class:t([[s.$style.doc,s.dealOverview&&s.$style.docUploaded],"flex gap-2 align-items-center"])},[Kc,e("div",null,[e("p",Xc,n(`Акт №: ${s.dealOverview.acceptance.value}`),1),e("p",Yc," Дата подписания: "+n(s.dealOverview.acceptance.date),1)])],2)])]),_:1},8,["class"])]),e("div",Zc,[o(f,{class:t(["h-full card-footer-bottom",{"bg-green-50":(z=(k=s.dealOverview)==null?void 0:k.docs_passed)==null?void 0:z.value}])},{content:l(()=>[e("div",Hc,[e("div",Gc,[e("div",Wc,[e("p",{class:t(s.$style.label)},[v("Передача оригиналов ПТС и СТС "),Jc],2),e("div",Qc,[o(w,{modelValue:s.dealOverview.docs_passed.value,"onUpdate:modelValue":u[3]||(u[3]=E=>s.dealOverview.docs_passed.value=E),onInput:u[4]||(u[4]=E=>s.postDocsPassed(s.dealID,E)),disabled:""},null,8,["modelValue"]),ed])])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),_:1},8,["class"])]),e("div",sd,[o(f,{class:t(["h-full card-footer-bottom",{"bg-green-50":(R=(N=s.dealOverview)==null?void 0:N.keys_passed)==null?void 0:R.value}])},{content:l(()=>[e("div",td,[e("div",od,[e("div",ld,[e("p",{class:t(s.$style.label)},[v("Передача 2-х комплектов ключей "),ud],2),e("div",nd,[o(w,{modelValue:s.dealOverview.keys_passed.value,"onUpdate:modelValue":u[5]||(u[5]=E=>s.dealOverview.keys_passed.value=E),onInput:u[6]||(u[6]=E=>s.postKeysPassed(s.dealID,E)),disabled:""},null,8,["modelValue"]),id])])]),e("i",{class:t(["pi pi-check-circle","text-green-500"])})])]),_:1},8,["class"])])]),e("div",ad,[o(a,{type:"submit",label:"Верифицировать",onClick:u[7]||(u[7]=E=>s.isShowConfirmChief=!0),loading:s.isSaving},null,8,["loading"]),o(a,{type:"submit",class:"ml-auto",label:"Отменить сделку",loading:s.isSaving,severity:"danger",onClick:u[8]||(u[8]=E=>s.isShowCancel=!0)},null,8,["loading"])])],64)}const dd={$style:aa},rd=I(ta,[["render",cd],["__cssModules",dd],["__file","/var/www/inflow-auto-front-main/src/views/deals/modules/DealMainConfirmation.vue"]]),pd={car:{name:null,vin:null,fields_filled:0,fields_total:0,complete:!1},owner:{name:null,phone:null,fields_filled:0,fields_total:0,complete:!1},signer:{name:null,phone:null,fields_filled:0,fields_total:0,complete:!1},docs:{fields_filled:0,fields_total:4,complete:!1},photos:{fields_filled:0,fields_total:1,complete:!1},inspection_date_time:{date:null,time:null,complete:!1},inspection_address:{value:null,complete:!1},agreement:{value:null,date:null,complete:!1},declared_cost_field:null,comment:null},ce=new Map([["draft",Zl],["negotiation",Pn],["success",Qi],["complete",_o],["canceled",pt],["begin",et],["confirmation",rd]]),fd=L({components:{Badge:me,ProgressSpinner:he},setup(){const s=S(),{principalState:u}=X(),d=s.params.dealID,r=y(!0),p=O(()=>s.params.dealID==="create"),c=O(()=>p.value?"Создание сделки":`Сделка № ${d}`),i=O(()=>{var m,a;return(m=u.overview)!=null&&m.data?ce.get(((a=u.overview.data)==null?void 0:a.state)||"draft"):ce.get("draft")}),h=()=>{Oe(d),K(d)};return q(async()=>{p.value||h()}),{isCreating:p,dealID:d,principalState:u,isLoading:r,currencyFormat:U,step:i,title:c,defaultDataOverview:pd}}}),vd="DealMain_loader_1691548270294",md="DealMain_formCard_1691548270294",hd={loader:vd,formCard:md},_d={class:"flex mb-4 justify-content-between"},gd={class:"flex align-items-center"};function wd(s,u,d,r,p,c){var h,m;const i=b("ProgressSpinner");return!s.isCreating&&(!s.principalState.overview||(h=s.principalState.overview)!=null&&h.isLoading)?(D(),C("div",{key:0,class:t([s.$style.loader,"p-4"])},[o(i,{strokeWidth:"1",animationDuration:".5s"})],2)):(D(),C("div",{key:1,class:t(["p-4",s.$style.formCard])},[e("div",_d,[e("h2",gd,n(s.title),1)]),(D(),Z(_e(s.step),{dealOverview:s.isCreating?s.defaultDataOverview:((m=s.principalState.overview)==null?void 0:m.data)||s.defaultDataOverview},null,8,["dealOverview"]))],2))}const bd={$style:hd},Xd=I(fd,[["render",wd],["__cssModules",bd],["__file","/var/www/inflow-auto-front-main/src/views/deals/DealMain.vue"]]);export{Xd as default};
