import{s as b}from"./button.esm-48574c78.js";import{a as B,b as C}from"./datatable.esm-2cd7f014.js";import{s as v}from"./progressspinner.esm-2138ab26.js";import{d as k,a as w,b as F,o as I,_ as V,m as s,g as p,c as t,j as y,h as _,p as u,q as j,f as i,B as f,t as n,F as L,u as S}from"./_plugin-vue_export-helper-4e0f1051.js";import{u as A}from"./vue-router-e112b3e0.js";import{r as N}from"./index-09ce0687.js";import{F as P}from"./FormInput-f5b5225b.js";import{f as T}from"./principalEmployees-1c0a89a9.js";import{u as M}from"./Api-3d31057e.js";import"./ripple.esm-2bb5fa45.js";import"./api.esm-fa2395b6.js";import"./dropdown.esm-cbd0410a.js";import"./overlayeventbus.esm-47a43062.js";import"./portal.esm-58de97e7.js";import"./virtualscroller.esm-b423035f.js";import"./runtime-dom.esm-bundler-b3385430.js";import"./inputnumber.esm-b284c98e.js";import"./focustrap.esm-4326017e.js";import"./Cookies-c25692b0.js";import"./FormItem-7dfcb1d1.js";const q=k({components:{ProgressSpinner:v,DataTable:B,Column:C,FormInput:P,Button:b},setup(){const{principalState:e}=M(),a=w(),l=F(()=>e.employees),m=A(),c=m.params.projectID;return I(async()=>await T(c)),{employees:l,router:N,routes:m,search:a}}}),z="EmployeeList_container_1691549853097",R="EmployeeList_loader_1691549853097",U={container:z,loader:R},W={class:"flex justify-content-between mb-4"},G={class:"w-25rem flex"};function H(e,a,l,m,c,K){const g=s("ProgressSpinner"),E=s("Button"),D=s("FormInput"),r=s("Column"),$=s("router-link"),h=s("DataTable");return e.employees?(i(),p("div",{key:1,class:y([e.$style.container,"p-4"])},[_("div",W,[t(E,{label:"Добавить сотрудника",onClick:a[0]||(a[0]=()=>e.router.push(`/projects/${e.routes.params.projectID}/employees/create`))}),_("div",G,[t(D,{type:"text",name:"search",modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=o=>e.search=o),label:"Поиск по ФИО или номеру телефона"},null,8,["modelValue"])])]),t(h,{value:e.employees.data,responsiveLayout:"scroll"},{default:u(()=>[t(r,{field:"id",header:"ID"}),t(r,{header:"ФИО"},{body:u(o=>[t($,{to:`employees/${o.data.id}`,class:"p-link"},{default:u(()=>[f(n(o.data.last_name)+" "+n(o.data.first_name)+" "+n(o.data.patronymic),1)]),_:2},1032,["to"])]),_:1}),t(r,{header:"Должность"},{body:u(o=>[(i(!0),p(L,null,S(o.data.roles,d=>(i(),p("p",{key:d},n(d),1))),128))]),_:1}),t(r,{header:"Контактный телефон"},{body:u(o=>[f(n(o.data.phone),1)]),_:1})]),_:1},8,["value"]),j(` <Paginator
          :currentPage="employees.pagination?.current_page || $route.query.page || 1"
          :total="employees.pagination?.total_pages"
          :lastPage="employees.pagination?.total_pages"
          :perPage="employees.pagination?.per_page"
          :count="employees.pagination?.count"
        /> `)],2)):(i(),p("div",{key:0,class:y([[e.$style.container,e.$style.loader],"p-4"])},[t(g,{strokeWidth:"1",animationDuration:".5s"})],2))}const J={$style:U},ye=V(q,[["render",H],["__cssModules",J],["__file","/var/www/inflow-auto-front-main/src/views/employees/EmployeeList.vue"]]);export{ye as default};
