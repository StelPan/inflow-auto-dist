import{b as _,a as p,o as h,_ as D,m as l,x as F,p as v,f as E,c as u}from"./_plugin-vue_export-helper-4e0f1051.js";import{u as P}from"./vue-router-e112b3e0.js";import{D as x,F as I}from"./DocInfo-40ccac8a.js";import{a as w,u as B,v as b}from"./principalDeals-5bcfc342.js";import{u as C}from"./Api-3d31057e.js";import{T as S,W as T}from"./Wrap-54e7c8aa.js";import"./Cookies-c25692b0.js";import"./index.es-55ebbfbf.js";import"./runtime-dom.esm-bundler-b3385430.js";import"./dayjs.min-18f6db6c.js";import"./DateTime-6dd15e58.js";import"./button.esm-48574c78.js";import"./ripple.esm-2bb5fa45.js";import"./progressspinner.esm-2138ab26.js";import"./index-9063c430.js";import"./FormLayout-06a8a99e.js";const W={components:{DocInfo:x,FileGroup:I,TitleBox:S,Wrap:T},setup(){var f;const n=P(),{principalState:a}=C(),r=n.params.dealID,e=_(()=>n.params.dealID==="create"),t=p([]),c=p([]),i=p({});e.value?t.value=[]:((f=a.deal)==null?void 0:f.data.id)!==Number(r)?h(()=>s()):t.value=a.deal.data.car.car_photos;const s=async()=>{const o=await w(r);o!=null&&o.car&&(t.value=o.car.car_photos)};return{photos:t,postDealPhotos:B,handleError:async o=>{i.value=o},principalState:a,setPreloadFile:o=>{c.value=o},preloadFile:c,removeFile:o=>{b(r,{uuid:o}),s()}}}};function G(n,a,r,e,t,c){const i=l("TitleBox"),s=l("DocInfo"),m=l("FileGroup"),d=l("Wrap");return E(),F(d,{class:"p-4",data:e.preloadFile,apiMethod:e.postDealPhotos,onUpdateError:e.handleError},{default:v(()=>[u(i,{nameSection:"Фото"}),u(s,{class:"mt-4 mb-5"}),u(m,{title:"Обязательные фото",photos:e.principalState.deal.data.car.car_photos,class:"mb-4",setPreloadFile:e.setPreloadFile,returnIDForDeletion:e.removeFile,multiple:""},null,8,["photos","setPreloadFile","returnIDForDeletion"])]),_:1},8,["data","apiMethod","onUpdateError"])}const Q=D(W,[["render",G],["__file","/var/www/inflow-auto-front-main/src/views/deals/draft/DealPhotos.vue"]]);export{Q as default};
