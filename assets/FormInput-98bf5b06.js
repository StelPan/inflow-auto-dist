import{D as h}from"./ripple.esm-2bb5fa45.js";import{f as n,g,j as m,d as k,b,_ as V,m as y,x as f,p as $,h as P,k as w,z as B,A as C}from"./_plugin-vue_export-helper-4e0f1051.js";import{s as p,a as v}from"./inputnumber.esm-b284c98e.js";import{F as M}from"./FormItem-904d0fd7.js";var o={name:"InputMask",emits:["update:modelValue","focus","blur","keydown","complete","keypress","paste"],props:{modelValue:null,slotChar:{type:String,default:"_"},mask:{type:String,default:null},autoClear:{type:Boolean,default:!0},unmask:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},watch:{mask(e,t){t!==e&&this.initMask()}},mounted(){this.initMask()},updated(){this.isValueUpdated()&&this.updateValue()},methods:{onInput(e){this.androidChrome?this.handleAndroidInput(e):this.handleInputChange(e),this.$emit("update:modelValue",e.target.value)},onFocus(e){if(this.readonly)return;this.focus=!0,clearTimeout(this.caretTimeoutId);let t;this.focusText=this.$el.value,t=this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.$el===document.activeElement&&(this.writeBuffer(),t===this.mask.replace("?","").length?this.caret(0,t):this.caret(t))},10),this.$emit("focus",e)},onBlur(e){if(this.focus=!1,this.checkVal(),this.updateModel(e),this.$el.value!==this.focusText){let t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.$el.dispatchEvent(t)}this.$emit("blur",e)},onKeyDown(e){if(this.readonly)return;let t=e.which||e.keyCode,s,i,l,a=/iphone/i.test(h.getUserAgent());this.oldVal=this.$el.value,t===8||t===46||a&&t===127?(s=this.caret(),i=s.begin,l=s.end,l-i===0&&(i=t!==46?this.seekPrev(i):l=this.seekNext(i-1),l=t===46?this.seekNext(l):l),this.clearBuffer(i,l),this.shiftL(i,l-1),this.updateModel(e),e.preventDefault()):t===13?(this.$el.blur(),this.updateModel(e)):t===27&&(this.$el.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(e),e.preventDefault()),this.$emit("keydown",e)},onKeyPress(e){if(!this.readonly){var t=e.which||e.keyCode,s=this.caret(),i,l,a,r;e.ctrlKey||e.altKey||e.metaKey||t<32||(t&&t!==13&&(s.end-s.begin!==0&&(this.clearBuffer(s.begin,s.end),this.shiftL(s.begin,s.end-1)),i=this.seekNext(s.begin-1),i<this.len&&(l=String.fromCharCode(t),this.tests[i].test(l)&&(this.shiftR(i),this.buffer[i]=l,this.writeBuffer(),a=this.seekNext(i),/android/i.test(h.getUserAgent())?setTimeout(()=>{this.caret(a)},0):this.caret(a),s.begin<=this.lastRequiredNonMaskPos&&(r=this.isCompleted()))),e.preventDefault()),this.updateModel(e),r&&this.$emit("complete",e),this.$emit("keypress",e))}},onPaste(e){this.handleInputChange(e),this.$emit("paste",e)},caret(e,t){let s,i,l;if(!(!this.$el.offsetParent||this.$el!==document.activeElement))if(typeof e=="number")i=e,l=typeof t=="number"?t:i,this.$el.setSelectionRange?this.$el.setSelectionRange(i,l):this.$el.createTextRange&&(s=this.$el.createTextRange(),s.collapse(!0),s.moveEnd("character",l),s.moveStart("character",i),s.select());else return this.$el.setSelectionRange?(i=this.$el.selectionStart,l=this.$el.selectionEnd):document.selection&&document.selection.createRange&&(s=document.selection.createRange(),i=0-s.duplicate().moveStart("character",-1e5),l=i+s.text.length),{begin:i,end:l}},isCompleted(){for(let e=this.firstNonMaskPos;e<=this.lastRequiredNonMaskPos;e++)if(this.tests[e]&&this.buffer[e]===this.getPlaceholder(e))return!1;return!0},getPlaceholder(e){return e<this.slotChar.length?this.slotChar.charAt(e):this.slotChar.charAt(0)},seekNext(e){for(;++e<this.len&&!this.tests[e];);return e},seekPrev(e){for(;--e>=0&&!this.tests[e];);return e},shiftL(e,t){let s,i;if(!(e<0)){for(s=e,i=this.seekNext(t);s<this.len;s++)if(this.tests[s]){if(i<this.len&&this.tests[s].test(this.buffer[i]))this.buffer[s]=this.buffer[i],this.buffer[i]=this.getPlaceholder(i);else break;i=this.seekNext(i)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,e))}},shiftR(e){let t,s,i,l;for(t=e,s=this.getPlaceholder(e);t<this.len;t++)if(this.tests[t])if(i=this.seekNext(t),l=this.buffer[t],this.buffer[t]=s,i<this.len&&this.tests[i].test(l))s=l;else break},handleAndroidInput(e){var t=this.$el.value,s=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>t.length){for(this.checkVal(!0);s.begin>0&&!this.tests[s.begin-1];)s.begin--;if(s.begin===0)for(;s.begin<this.firstNonMaskPos&&!this.tests[s.begin];)s.begin++;this.caret(s.begin,s.begin)}else{for(this.checkVal(!0);s.begin<this.len&&!this.tests[s.begin];)s.begin++;this.caret(s.begin,s.begin)}this.isCompleted()&&this.$emit("complete",e)},clearBuffer(e,t){let s;for(s=e;s<t&&s<this.len;s++)this.tests[s]&&(this.buffer[s]=this.getPlaceholder(s))},writeBuffer(){this.$el.value=this.buffer.join("")},checkVal(e){this.isValueChecked=!0;let t=this.$el.value,s=-1,i,l,a;for(i=0,a=0;i<this.len;i++)if(this.tests[i]){for(this.buffer[i]=this.getPlaceholder(i);a++<t.length;)if(l=t.charAt(a-1),this.tests[i].test(l)){this.buffer[i]=l,s=i;break}if(a>t.length){this.clearBuffer(i+1,this.len);break}}else this.buffer[i]===t.charAt(a)&&a++,i<this.partialPosition&&(s=i);return e?this.writeBuffer():s+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.$el.value&&(this.$el.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.$el.value=this.$el.value.substring(0,s+1)),this.partialPosition?i:this.firstNonMaskPos},handleInputChange(e){if(!this.readonly){var t=this.checkVal(!0);this.caret(t),this.updateModel(e),this.isCompleted()&&this.$emit("complete",e)}},getUnmaskedValue(){let e=[];for(let t=0;t<this.buffer.length;t++){let s=this.buffer[t];this.tests[t]&&s!==this.getPlaceholder(t)&&e.push(s)}return e.join("")},updateModel(e){let t=this.unmask?this.getUnmaskedValue():e.target.value;this.$emit("update:modelValue",this.defaultBuffer!==t?t:"")},updateValue(e=!0){this.$el&&(this.modelValue==null?(this.$el.value="",e&&this.$emit("update:modelValue","")):(this.$el.value=this.modelValue,this.checkVal(),setTimeout(()=>{if(this.$el&&(this.writeBuffer(),this.checkVal(),e)){let t=this.unmask?this.getUnmaskedValue():this.$el.value;this.$emit("update:modelValue",this.defaultBuffer!==t?t:"")}},10)),this.focusText=this.$el.value)},initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};let e=h.getUserAgent();this.androidChrome=/chrome/i.test(e)&&/android/i.test(e);let t=this.mask.split("");for(let s=0;s<t.length;s++){let i=t[s];i==="?"?(this.len--,this.partialPosition=s):this.defs[i]?(this.tests.push(new RegExp(this.defs[i])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1),s<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let s=0;s<t.length;s++){let i=t[s];i!=="?"&&(this.defs[i]?this.buffer.push(this.getPlaceholder(s)):this.buffer.push(i))}this.defaultBuffer=this.buffer.join(""),this.updateValue(!1)},isValueUpdated(){return this.unmask?this.modelValue!=this.getUnmaskedValue():this.defaultBuffer!==this.$el.value&&this.$el.value!==this.modelValue}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0},inputClass(){return["p-inputmask p-inputtext p-component",{"p-filled":this.filled}]}}};const I=["readonly"];function N(e,t,s,i,l,a){return n(),g("input",{class:m(a.inputClass),readonly:s.readonly,onInput:t[0]||(t[0]=(...r)=>a.onInput&&a.onInput(...r)),onFocus:t[1]||(t[1]=(...r)=>a.onFocus&&a.onFocus(...r)),onBlur:t[2]||(t[2]=(...r)=>a.onBlur&&a.onBlur(...r)),onKeydown:t[3]||(t[3]=(...r)=>a.onKeyDown&&a.onKeyDown(...r)),onKeypress:t[4]||(t[4]=(...r)=>a.onKeyPress&&a.onKeyPress(...r)),onPaste:t[5]||(t[5]=(...r)=>a.onPaste&&a.onPaste(...r))},null,42,I)}o.render=N;const d={default:p,mask:o,number:v},R=k({props:{name:String,type:String,label:String,modelValue:String,disabled:Boolean,showErrors:Boolean,errorResponse:Object,isFloatLabel:Boolean,isOffset:Boolean,maskProps:Object,numberProps:Object,as:{default:"default",type:String}},emits:["update:modelValue"],components:{FormItem:M,InputText:p,InputMask:o},setup(e){const t=d[e.as]||d.default,s=b(()=>{switch(e.as){case"mask":return e.maskProps;case"number":return e.numberProps;default:return{}}});return{inputType:t,extention:s}}}),T="FormInput_input_1691548060555",S={input:T};function x(e,t,s,i,l,a){const r=y("FormItem");return n(),f(r,{isOffset:e.isOffset,name:e.name,modelValue:e.modelValue,showErrors:e.showErrors,errorResponse:e.errorResponse},{default:$(({isError:u})=>[P("div",{class:m([e.$style.label,"text-sm"])},[w(e.$slots,"default")],2),(n(),f(B(e.inputType),C({type:e.type,name:e.name,modelValue:e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=c=>e.$emit("update:modelValue",c)),placeholder:e.label,disabled:e.disabled,class:[u&&"p-invalid",e.$style.input]},e.extention),null,16,["type","name","modelValue","placeholder","disabled","class"]))]),_:3},8,["isOffset","name","modelValue","showErrors","errorResponse"])}const E={$style:S},U=V(R,[["render",x],["__cssModules",E],["__file","/var/www/inflow-auto-front-main/src/shared/components/FormInput/FormInput.vue"]]);export{U as F};
