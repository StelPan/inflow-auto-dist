import{s as h}from"./button.esm-48574c78.js";import{a as B,b}from"./datatable.esm-2cd7f014.js";import{s as v}from"./progressspinner.esm-2138ab26.js";import{d as E,a as k,b as w,o as I,_ as V,m as n,g as m,c as o,j as d,h as _,p as s,q as j,f,B as l,t as u}from"./_plugin-vue_export-helper-4e0f1051.js";import{u as A}from"./vue-router-e112b3e0.js";import{r as F}from"./index-72d7336d.js";import{F as S}from"./FormInput-a7191b54.js";import{f as L}from"./principalClients-e656c28c.js";import{u as N}from"./Api-3d31057e.js";import"./ripple.esm-2bb5fa45.js";import"./api.esm-fa2395b6.js";import"./dropdown.esm-cbd0410a.js";import"./overlayeventbus.esm-47a43062.js";import"./portal.esm-58de97e7.js";import"./virtualscroller.esm-b423035f.js";import"./runtime-dom.esm-bundler-b3385430.js";import"./inputnumber.esm-b284c98e.js";import"./focustrap.esm-4326017e.js";import"./Cookies-c25692b0.js";import"./FormItem-83c2c2c1.js";const P=E({components:{ProgressSpinner:v,DataTable:B,Column:b,FormInput:S,Button:h},setup(){const{principalState:t}=N(),a=k(),p=w(()=>t.clients),i=A(),c=i.params.projectID;return I(async()=>await L(c)),{clients:p,router:F,routes:i,search:a}}}),T="ClientList_container_1691720646578",M="ClientList_loader_1691720646579",q={container:T,loader:M},z={class:"flex justify-content-between mb-4"},R={class:"w-25rem flex"};function U(t,a,p,i,c,G){const g=n("ProgressSpinner"),y=n("Button"),D=n("FormInput"),r=n("Column"),C=n("router-link"),$=n("DataTable");return t.clients?(f(),m("div",{key:1,class:d([t.$style.container,"p-4"])},[_("div",z,[o(y,{label:"Добавить клиента",onClick:a[0]||(a[0]=()=>t.router.push(`/projects/${t.routes.params.projectID}/clients/create`))}),_("div",R,[o(D,{type:"text",name:"search",modelValue:t.search,"onUpdate:modelValue":a[1]||(a[1]=e=>t.search=e),label:"Поиск по ФИО или номеру телефона"},null,8,["modelValue"])])]),o($,{value:t.clients.data,responsiveLayout:"scroll"},{default:s(()=>[o(r,{field:"id",header:"ID"}),o(r,{header:"ФИО"},{body:s(e=>[o(C,{to:`clients/${e.data.id}`,class:"p-link"},{default:s(()=>[l(u(e.data.last_name)+" "+u(e.data.first_name)+" "+u(e.data.patronymic),1)]),_:2},1032,["to"])]),_:1}),o(r,{header:"Контактный e-mail"},{body:s(e=>[l(u(e.data.email),1)]),_:1}),o(r,{header:"Контактный телефон"},{body:s(e=>[l(u(e.data.phone),1)]),_:1})]),_:1},8,["value"]),j(` <Paginator
          :currentPage="clients.pagination?.current_page || $route.query.page || 1"
          :total="clients.pagination?.total_pages"
          :lastPage="clients.pagination?.total_pages"
          :perPage="clients.pagination?.per_page"
          :count="clients.pagination?.count"
        /> `)],2)):(f(),m("div",{key:0,class:d([[t.$style.container,t.$style.loader],"p-4"])},[o(g,{strokeWidth:"1",animationDuration:".5s"})],2))}const W={$style:q},ct=V(P,[["render",U],["__cssModules",W],["__file","/var/www/inflow-auto-front-main/src/views/clients/ClientList.vue"]]);export{ct as default};
